<!-- Chunk 1465: bytes 6308651-6309919, type=function -->
def cached(ttl: int = 300, key_prefix: str = ""):
    """
    Cache function results.

    Args:
        ttl: Time-to-live in seconds
        key_prefix: Prefix for cache keys

    Examples:
        >>> @cached(ttl=600, key_prefix="taxonomy")
        ... def get_taxonomy_structure():
        ...     # Expensive operation
        ...     return taxonomy_data

    """

    def decorator(func: Callable[..., T]) -> Callable[..., T]:
        @functools.wraps(func)
        def wrapper(*args, **kwargs) -> T:
            # Generate cache key from function name and arguments
            func_name = getattr(func, "__name__", "unknown")
            args_str = str(args) + str(sorted(kwargs.items()))
            cache_key_suffix = hash_key(args_str)
            key = cache_key(func_name, cache_key_suffix, prefix=key_prefix)

            # Try to get from cache
            result = _cache.get(key)
            if result is not None:
                logger.debug(f"Cache hit: {key}")
                return result

            # Call function and cache result
            logger.debug(f"Cache miss: {key}")
            result = func(*args, **kwargs)
            _cache.set(key, result, ttl=ttl)

            return result

        return wrapper

    return decorator


