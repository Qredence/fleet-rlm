<!-- Chunk 2072: bytes 7979753-7981619, type=class -->
class TestAnalyzeDependenciesModule:
    """Test AnalyzeDependenciesModule."""

    def test_module_can_be_instantiated(self):
        """Should create instance with ChainOfThought."""
        module = AnalyzeDependenciesModule()
        assert module is not None
        assert hasattr(module, "analyze")

    @patch("skill_fleet.core.modules.understanding.dependencies.dspy.ChainOfThought")
    def test_forward_returns_dependency_analysis(self, mock_cot):
        """Should return dependency analysis."""
        mock_result = Mock()
        mock_result.prerequisite_skills = ["javascript: Required for React"]
        mock_result.complementary_skills = ["testing: Useful for components"]
        mock_result.conflicting_skills = []
        mock_result.missing_prerequisites = []
        mock_result.dependency_rationale = "JavaScript is required for React"

        mock_cot.return_value.return_value = mock_result

        module = AnalyzeDependenciesModule()
        result = module.forward(
            task_description="Build React components",
            intent_analysis={"skill_type": "how_to"},
            taxonomy_path="technical/frontend/react",
            existing_skills=["javascript", "html"],
        )

        assert isinstance(result, dict)
        assert "prerequisite_skills" in result
        assert "complementary_skills" in result
        assert len(result["prerequisite_skills"]) == 1

    @pytest.mark.skip(reason="Integration test - requires actual LM configuration")
    def test_handles_empty_existing_skills(self):
        """Should handle empty existing skills list."""
        module = AnalyzeDependenciesModule()

        result = module.forward(task_description="Learn Python", existing_skills=[])

        assert isinstance(result["prerequisite_skills"], list)
        assert isinstance(result["complementary_skills"], list)


