<!-- Chunk 1324: bytes 4860399-4867235, type=class -->
class TavilySearchResponse(BaseModel):
    answer: Optional[str] = None
    results: List[SearchResult]
    images: Optional[List[str]] = None

@app.post("/search/optimized", response_model=TavilySearchResponse)
async def optimized_search(request: TavilySearchRequest):
    payload = {**request.model_dump(), "api_key": settings.tavily_api_key}
    response = await app.state.client.post("/search", json=payload)
    
    # The response is validated against TavilySearchResponse, 
    # stripping away unwanted metadata automatically.
    return response.json()
```

### 3. Multi-modal Workflow (Image Search)
When agents need visual context, use the `include_images` flag. This is useful for UI/UX agents or visual verification tasks.

```python
@app.post("/search/images")
async def search_images(query: str):
    # Specialized endpoint for quick visual retrieval
    payload = {
        "query": query,
        "include_images": True,
        "search_depth": "basic",
        "api_key": settings.tavily_api_key
    }
    response = await app.state.client.post("/search", json=payload)
    data = response.json()
    return {"images": data.get("images", [])}
```

## Common Mistakes

| Mistake | Why It's Wrong | Fix |
| ------- | -------------- | --- |
| Hardcoding API Keys | Security risk; keys might be leaked to version control. | Use `pydantic-settings` or `.env` files. |
| Ignoring `include_answer` | Tavily provides an LLM-generated summary. Agents waste tokens generating their own. | Set `include_answer: True` for direct questions. |
| Deep search for everything | `advanced` search depth is slower and costs more credits. | Default to `basic` and only escalate if needed. |
| No timeout handling | The search engine might hang, causing your agent to wait indefinitely. | Set a `timeout` (e.g., 10s) in the `httpx` client. |

## Red Flags

- **High Latency:** If search takes >5 seconds, check if `search_depth` is set to `advanced` or if the network is saturated.
- **429 Errors:** You are hitting Tavily's rate limits; consider implementing a queue or upgrading your plan.
- **Empty Results:** Often caused by overly specific queries or incorrect API key scopes.

---

## Validation

```bash
# Verify the service is running
curl -X POST http://localhost:8000/search \
     -H "Content-Type: application/json" \
     -d '{"query": "Latest news on AI agents", "search_depth": "basic"}'
```

============================================================
END FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/SKILL.md
============================================================

============================================================
FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/assets/README.md
============================================================

# Assets

Static assets for `tavily-rest-api-tool`.

Includes images, diagrams, and other static files.


============================================================
END FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/assets/README.md
============================================================

============================================================
FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/capabilities/README.md
============================================================

# Capabilities

Capability implementations for `tavily-rest-api-tool`.

Each file in this directory documents a specific capability provided by this skill.


============================================================
END FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/capabilities/README.md
============================================================

============================================================
FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/examples/README.md
============================================================

# Examples

Usage examples for `tavily-rest-api-tool`.

Each file demonstrates a specific use case or pattern.


============================================================
END FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/examples/README.md
============================================================

============================================================
FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/metadata.json
============================================================

{
  "skill_id": "tools/web_search/tavily",
  "name": "tavily-rest-api-tool",
  "description": "A Python implementation of a REST API wrapper for the Tavily Search service, designed to provide structured web search capabilities to AI agents.",
  "version": "1.0.0",
  "type": "tool",
  "tags": [
    "python",
    "fastapi",
    "tavily",
    "api",
    "search"
  ],
  "dependencies": [
    "programming/python/fastapi",
    "security/environment_management",
    "programming/python/pydantic",
    "programming/python/http_clients"
  ],
  "weight": "medium",
  "load_priority": "on_demand",
  "capabilities": [],
  "category": "tools/web_search",
  "created_at": "2026-01-15T04:09:36.341414+00:00",
  "last_modified": "2026-01-15T04:09:36.341414+00:00",
  "evolution": {
    "created_by": "skill-fleet-api",
    "workflow": "SkillCreationProgram",
    "validation_score": 0.72
  }
}


============================================================
END FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/metadata.json
============================================================

============================================================
FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/references/README.md
============================================================

# References

Reference documentation for `tavily-rest-api-tool`.

## Contents

- [Quick Start](quick-start.md) - Get started quickly
- [Common Patterns](common-patterns.md) - Frequently used patterns
- [API Reference](api-reference.md) - Detailed API documentation
- [Troubleshooting](troubleshooting.md) - Common issues and solutions


============================================================
END FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/references/README.md
============================================================

============================================================
FILE: skills/_drafts/51a31ca6-3c08-47eb-b2de-d0b5bf962271/tools/web_search/tavily/references/api-reference.md
============================================================

# API Reference

Detailed API documentation for `tavily-rest-api-tool`.

## Core Functions

### function_name

```python
