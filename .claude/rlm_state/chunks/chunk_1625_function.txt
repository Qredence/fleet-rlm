<!-- Chunk 1625: bytes 6664051-6665116, type=function -->
def coerce_reasoning_text(value: Any) -> str:
    """Coerce reasoning text to string safely."""
    if value is None:
        return ""
    if isinstance(value, Reasoning):
        return str(value.content or "").strip()
    return str(value).strip()


============================================================
END FILE: src/skill_fleet/common/dspy_compat.py
============================================================

============================================================
FILE: src/skill_fleet/common/env_utils.py
============================================================

"""
Environment helpers for resolving preferred LLM API credentials.

Provides a small utility to prefer LiteLLM proxy credentials (LITELLM_API_KEY
and LITELLM_BASE_URL) when present, and fall back to Google/Gemini keys
(`GOOGLE_API_KEY` / `GEMINI_API_KEY`) otherwise.

This centralizes credential resolution so the rest of the codebase can
consistently prefer the proxy when configured.
"""

from __future__ import annotations

import os
from typing import TypedDict, cast


