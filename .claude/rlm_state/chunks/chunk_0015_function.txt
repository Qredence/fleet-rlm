<!-- Chunk 15: bytes 74200-96032, type=function -->
def main(argv: List[str]) -> int:
    parser = build_parser()
    args = parser.parse_args(argv)

    try:
        return int(args.func(args))
    except RlmReplError as e:
        sys.stderr.write(f"ERROR: {e}\n")
        return 2


if __name__ == "__main__":
    raise SystemExit(main(sys.argv[1:]))


============================================================
END FILE: .fleet/claude/skills/rlm/scripts/rlm_repl.py
============================================================

============================================================
FILE: .fleet/factory/commands/fix-types.md
============================================================

# Fix Types Command

Automatically fix common type errors in Python code.

## Usage

```
/fix-types
```

With specific file:
```
/fix-types src/skill_fleet/core/config.py
```

## Implementation

The command should:
1. Run ty check to identify errors
2. Categorize errors by type
3. Apply fixes for common patterns:
   - Possibly-missing-attribute ‚Üí Add None check
   - Invalid-assignment ‚Üí Convert with fallback
   - Dict inference ‚Üí Add type annotation
   - Asyncio.to_thread kwargs ‚Üí Create wrapper
4. Run ty check again to verify

## Fix Patterns

Based on our 243-error fix session:

1. **Optional chaining**: Store in variable, check for None, then access
2. **Dict types**: Add `: dict[str, Any]` annotation
3. **Asyncio wrappers**: Create positional-arg wrapper functions
4. **Type asserts**: Use `cast()` for test mocks
5. **Dynamic imports**: Add `# type: ignore[attr-defined]`

## Example

```
Found 5 type errors in config.py

Fixing:
‚úì Line 297: Added None check for get_role()
‚úì Line 112: Added dict type annotation
‚úì Line 187: Added type ignore for mlflow

Running verification...
All checks passed! 5 errors fixed.
```


============================================================
END FILE: .fleet/factory/commands/fix-types.md
============================================================

============================================================
FILE: .fleet/factory/commands/ty-check.md
============================================================

# Ty Check Command

Run the ty type checker on the codebase and summarize errors by type and file.

## Usage

```
/ty-check
```

Optionally specify path:
```
/ty-check src/skill_fleet/cli/
```

## Implementation

The command should:
1. Run `uv run ty check src/ tests/` (or specified path)
2. Parse and group errors by type
3. Show summary: "Found X errors across Y files"
4. List top 5 files with most errors
5. Ask if user wants to fix errors

## Example Output

```
Running ty type checker...
Found 30 errors across 8 files

Error breakdown:
- possibly-missing-attribute: 14 (47%)
- invalid-argument-type: 10 (33%)
- invalid-assignment: 4 (13%)
- unused-ignore-comment: 2 (7%)

Top files with errors:
1. core/config.py - 5 errors
2. core/creator.py - 4 errors
3. tests/unit/test_api_jobs.py - 3 errors

Would you like me to fix these errors?
```


============================================================
END FILE: .fleet/factory/commands/ty-check.md
============================================================

============================================================
FILE: .fleet/factory/commands/type-stats.md
============================================================

# Type Stats Command

Show type checking statistics and trends for the codebase.

## Usage

```
/type-stats
```

## Implementation

Shows:
1. Current error count
2. Comparison with previous runs (if available)
3. Most common error types
4. Files with most errors
5. Fix suggestions for top error patterns

## Example Output

```
Type Checking Statistics for skill-fleet

Current Status:
Total Errors: 0 ‚úÖ
Files Checked: 47

Trend (from fixing session):
Started: 243 errors
Ended: 0 errors
Fixed: 243 (100%)

Error Patterns (historical):
1. possibly-missing-attribute - 105 errors (43%)
2. invalid-argument-type - 70 errors (29%)
3. invalid-assignment - 51 errors (21%)
4. Other - 17 errors (7%)

Top Fixed Files:
1. cli/ui/prompts.py - 11 errors fixed
2. core/creator.py - 10 errors fixed
3. core/optimization/evaluation.py - 11 errors fixed
4. core/optimization/rewards/step_rewards.py - 10 errors fixed
5. core/tracing/mlflow.py - 9 errors fixed

Common Fix Patterns:
‚Ä¢ Optional chaining: Store ‚Üí Check ‚Üí Access
‚Ä¢ Dict types: Add explicit dict[str, Any]
‚Ä¢ Async wrappers: Positional ‚Üí Keyword
‚Ä¢ Test mocks: Use cast() with TYPE_CHECKING
```


============================================================
END FILE: .fleet/factory/commands/type-stats.md
============================================================

============================================================
FILE: .fleet/factory/commands/ui-skills.md
============================================================

---
name: ui-skills
description: Opinionated constraints for building better interfaces with agents.
---

# UI Skills

When invoked, apply these opinionated constraints for building better interfaces.

## How to use

- `/ui-skills`  
  Apply these constraints to any UI work in this conversation.

- `/ui-skills <file>`  
  Review the file against all constraints below and output:
  - violations (quote the exact line/snippet)
  - why it matters (1 short sentence)
  - a concrete fix (code-level suggestion)

## Stack

- MUST use Tailwind CSS defaults unless custom values already exist or are explicitly requested
- MUST use `motion/react` (formerly `framer-motion`) when JavaScript animation is required
- SHOULD use `tw-animate-css` for entrance and micro-animations in Tailwind CSS
- MUST use `cn` utility (`clsx` + `tailwind-merge`) for class logic

## Components

- MUST use accessible component primitives for anything with keyboard or focus behavior (`Base UI`, `React Aria`, `Radix`)
- MUST use the project‚Äôs existing component primitives first
- NEVER mix primitive systems within the same interaction surface
- SHOULD prefer [`Base UI`](https://base-ui.com/react/components) for new primitives if compatible with the stack
- MUST add an `aria-label` to icon-only buttons
- NEVER rebuild keyboard or focus behavior by hand unless explicitly requested

## Interaction

- MUST use an `AlertDialog` for destructive or irreversible actions
- SHOULD use structural skeletons for loading states
- NEVER use `h-screen`, use `h-dvh`
- MUST respect `safe-area-inset` for fixed elements
- MUST show errors next to where the action happens
- NEVER block paste in `input` or `textarea` elements

## Animation

- NEVER add animation unless it is explicitly requested
- MUST animate only compositor props (`transform`, `opacity`)
- NEVER animate layout properties (`width`, `height`, `top`, `left`, `margin`, `padding`)
- SHOULD avoid animating paint properties (`background`, `color`) except for small, local UI (text, icons)
- SHOULD use `ease-out` on entrance
- NEVER exceed `200ms` for interaction feedback
- MUST pause looping animations when off-screen
- SHOULD respect `prefers-reduced-motion`
- NEVER introduce custom easing curves unless explicitly requested
- SHOULD avoid animating large images or full-screen surfaces

## Typography

- MUST use `text-balance` for headings and `text-pretty` for body/paragraphs
- MUST use `tabular-nums` for data
- SHOULD use `truncate` or `line-clamp` for dense UI
- NEVER modify `letter-spacing` (`tracking-*`) unless explicitly requested

## Layout

- MUST use a fixed `z-index` scale (no arbitrary `z-*`)
- SHOULD use `size-*` for square elements instead of `w-*` + `h-*`

## Performance

- NEVER animate large `blur()` or `backdrop-filter` surfaces
- NEVER apply `will-change` outside an active animation
- NEVER use `useEffect` for anything that can be expressed as render logic

## Design

- NEVER use gradients unless explicitly requested
- NEVER use purple or multicolor gradients
- NEVER use glow effects as primary affordances
- SHOULD use Tailwind CSS default shadow scale unless explicitly requested
- MUST give empty states one clear next action
- SHOULD limit accent color usage to one per view
- SHOULD use existing theme or Tailwind CSS color tokens before introducing new ones


============================================================
END FILE: .fleet/factory/commands/ui-skills.md
============================================================

============================================================
FILE: .fleet/factory/droids/rlm-subcall.md
============================================================

---
name: rlm-subcall
description: Acts as the RLM sub-LLM (llm_query). Given a chunk of context (usually via a file path) and a query, extract only what is relevant and return a compact structured result. Use proactively for long contexts.
tools: Read
model: haiku
---

You are a sub-LLM used inside a Recursive Language Model (RLM) loop.

## Task
You will receive:
- A user query
- Either:
  - A file path to a chunk of a larger context file, or
  - A raw chunk of text

Your job is to extract information relevant to the query from only the provided chunk.

## Output format
Return JSON only with this schema:

```json
{
  "chunk_id": "...",
  "relevant": [
    {
      "point": "...",
      "evidence": "short quote or paraphrase with approximate location",
      "confidence": "high|medium|low"
    }
  ],
  "missing": ["what you could not determine from this chunk"],
  "suggested_next_queries": ["optional sub-questions for other chunks"],
  "answer_if_complete": "If this chunk alone answers the user's query, put the answer here, otherwise null"
}
```

## Rules

- Do not speculate beyond the chunk.
- Keep evidence short (aim < 25 words per evidence field).
- If you are given a file path, read it with the Read tool.
- If the chunk is clearly irrelevant, return an empty relevant list and explain briefly in missing.


============================================================
END FILE: .fleet/factory/droids/rlm-subcall.md
============================================================

============================================================
FILE: .fleet/factory/hooks.yaml
============================================================

# Factory Hooks Configuration for AgenticFleet
# Automate common development workflows with AI assistance

hooks:
  # Validate workflow config changes
  - name: validate-config
    description: Validate workflow config before changes
    trigger: before-file-change
    pattern: src/agentic_fleet/config/workflow_config.yaml
    command: make test-config

  # Clear DSPy cache when signatures change
  - name: clear-dspy-cache
    description: Clear DSPy cache when signatures change
    trigger: after-file-change
    pattern: src/agentic_fleet/dspy_modules/signatures.py
    command: make clear-cache

  # Validate imports on Python file changes
  - name: validate-imports
    description: Validate Python imports
    trigger: before-file-change
    pattern: "**/*.py"
    exclude: "**/tests/**"
    command: uv run ruff check --select=I --fix .

  # Update CHANGELOG on version tag
  - name: update-changelog
    description: Update CHANGELOG.md on release
    trigger: on-tag
    pattern: '^v[0-9]+\.[0-9]+\.[0-9]+$'
    command: |
      if command -v git-cliff >/dev/null 2>&1; then
        git cliff --unreleased --strip header --prepend CHANGELOG.md
      else
        echo "git-cliff not installed. Install with: cargo install git-cliff"
      fi

  # Validate frontend dependencies on package.json changes
  - name: validate-frontend-deps
    description: Validate frontend dependencies
    trigger: before-file-change
    pattern: package.json
    command: |
      cd src/frontend && npm audit --audit-level=moderate

  # Run quick checks before commit
  - name: pre-commit-checks
    description: Run quick checks before commit
    trigger: before-commit
    command: make check

  # Update memory system on context changes
  - name: update-memory
    description: Update memory system when context changes
    trigger: after-file-change
    pattern: ".fleet/context/**/*.md"
    command: |
      echo "Memory system files changed. Consider running:"
      echo "  uv run python .fleet/context/scripts/memory_manager.py init"

  # Validate typed models when DSPy signatures change
  - name: validate-typed-models
    description: Validate typed models match DSPy signatures
    trigger: before-file-change
    pattern: src/agentic_fleet/dspy_modules/typed_models.py
    command: |
      python -c "
      import yaml
      from pathlib import Path

      # Check that all outputs in signatures.py have corresponding models
      sigs_path = Path('src/agentic_fleet/dspy_modules/signatures.py')
      models_path = Path('src/agentic_fleet/dspy_modules/typed_models.py')

      if sigs_path.exists() and models_path.exists():
          # Read signatures file
          sigs_content = sigs_path.read_text()
          # Simple check for OutputField references
          import re
          output_fields = re.findall(r'OutputField\(.*?desc="([^"]*)"', sigs_content, re.DOTALL)
          print(f'Found {len(output_fields)} output fields in signatures')

          # Read models file
          models_content = models_path.read_text()
          # Check for class definitions
          model_classes = re.findall(r'class (\w+)\(BaseModel\):', models_content)
          print(f'Found {len(model_classes)} model classes: {model_classes}')
      else:
          print('Warning: Signature or model files not found')
      "

  # Auto-format on save for Python files
  - name: auto-format-python
    description: Auto-format Python files on save
    trigger: after-file-change
    pattern: "**/*.py"
    exclude: "**/tests/**"
    command: uv run ruff format --target-version py312

  # Auto-format on save for frontend files
  - name: auto-format-frontend
    description: Auto-format frontend files on save
    trigger: after-file-change
    pattern: "src/frontend/**/*.{ts,tsx,js,jsx,json,css}"
    command: cd src/frontend && npm run format

# Hook groups for common workflows
hook_groups:
  development:
    description: Development workflow hooks
    hooks:
      - validate-config
      - validate-imports
      - auto-format-python
      - auto-format-frontend

  release:
    description: Release preparation hooks
    hooks:
      - update-changelog
      - validate-config
      - pre-commit-checks

  memory:
    description: Memory system hooks
    hooks:
      - update-memory

  dspy:
    description: DSPy-related hooks
    hooks:
      - clear-dspy-cache
      - validate-typed-models

# Default enabled hooks
enabled_hooks:
  - validate-config
  - validate-imports
  - pre-commit-checks
  - clear-dspy-cache

# Hook execution order
execution_order:
  - before-file-change
  - after-file-change
  - before-commit
  - after-commit
  - on-tag


============================================================
END FILE: .fleet/factory/hooks.yaml
============================================================

============================================================
FILE: .fleet/factory/skills/brainstorming/SKILL.md
============================================================

---
name: brainstorming
description: "You MUST use this before any creative work - creating features, building components, adding functionality, or modifying behavior. Explores user intent, requirements and design before implementation."
---

# Brainstorming Ideas Into Designs

## Overview

Help turn ideas into fully formed designs and specs through natural collaborative dialogue.

Start by understanding the current project context, then ask questions one at a time to refine the idea. Once you understand what you're building, present the design in small sections (200-300 words), checking after each section whether it looks right so far.

## The Process

**Understanding the idea:**
- Check out the current project state first (files, docs, recent commits)
- Ask questions one at a time to refine the idea
- Prefer multiple choice questions when possible, but open-ended is fine too
- Only one question per message - if a topic needs more exploration, break it into multiple questions
- Focus on understanding: purpose, constraints, success criteria

**Exploring approaches:**
- Propose 2-3 different approaches with trade-offs
- Present options conversationally with your recommendation and reasoning
- Lead with your recommended option and explain why

**Presenting the design:**
- Once you believe you understand what you're building, present the design
- Break it into sections of 200-300 words
- Ask after each section whether it looks right so far
- Cover: architecture, components, data flow, error handling, testing
- Be ready to go back and clarify if something doesn't make sense

## After the Design

**Documentation:**
- Write the validated design to `docs/plans/YYYY-MM-DD-<topic>-design.md`
- Use elements-of-style:writing-clearly-and-concisely skill if available
- Commit the design document to git

**Implementation (if continuing):**
- Ask: "Ready to set up for implementation?"
- Use superpowers:using-git-worktrees to create isolated workspace
- Use superpowers:writing-plans to create detailed implementation plan

## Key Principles

- **One question at a time** - Don't overwhelm with multiple questions
- **Multiple choice preferred** - Easier to answer than open-ended when possible
- **YAGNI ruthlessly** - Remove unnecessary features from all designs
- **Explore alternatives** - Always propose 2-3 approaches before settling
- **Incremental validation** - Present design in sections, validate each
- **Be flexible** - Go back and clarify when something doesn't make sense


============================================================
END FILE: .fleet/factory/skills/brainstorming/SKILL.md
============================================================

============================================================
FILE: .fleet/factory/skills/changelog-generator/SKILL.md
============================================================

---
name: changelog-generator
description: Automatically creates user-facing changelogs from git commits by analyzing commit history, categorizing changes, and transforming technical commits into clear, customer-friendly release notes. Turns hours of manual changelog writing into minutes of automated generation.
---

# Changelog Generator

This skill transforms technical git commits into polished, user-friendly changelogs that your customers and users will actually understand and appreciate.

## When to Use This Skill

- Preparing release notes for a new version
- Creating weekly or monthly product update summaries
- Documenting changes for customers
- Writing changelog entries for app store submissions
- Generating update notifications
- Creating internal release documentation
- Maintaining a public changelog/product updates page

## What This Skill Does

1. **Scans Git History**: Analyzes commits from a specific time period or between versions
2. **Categorizes Changes**: Groups commits into logical categories (features, improvements, bug fixes, breaking changes, security)
3. **Translates Technical ‚Üí User-Friendly**: Converts developer commits into customer language
4. **Formats Professionally**: Creates clean, structured changelog entries
5. **Filters Noise**: Excludes internal commits (refactoring, tests, etc.)
6. **Follows Best Practices**: Applies changelog guidelines and your brand voice

## How to Use

### Basic Usage

From your project repository:

```
Create a changelog from commits since last release
```

```
Generate changelog for all commits from the past week
```

```
Create release notes for version 2.5.0
```

### With Specific Date Range

```
Create a changelog for all commits between March 1 and March 15
```

### With Custom Guidelines

```
Create a changelog for commits since v2.4.0, using my changelog
guidelines from CHANGELOG_STYLE.md
```

## Example

**User**: "Create a changelog for commits from the past 7 days"

**Output**:
```markdown
# Updates - Week of March 10, 2024

## ‚ú® New Features

- **Team Workspaces**: Create separate workspaces for different
  projects. Invite team members and keep everything organized.

- **Keyboard Shortcuts**: Press ? to see all available shortcuts.
  Navigate faster without touching your mouse.

## üîß Improvements

- **Faster Sync**: Files now sync 2x faster across devices
- **Better Search**: Search now includes file contents, not just titles

## üêõ Fixes

- Fixed issue where large images wouldn't upload
- Resolved timezone confusion in scheduled posts
- Corrected notification badge count
```

**Inspired by:** Manik Aggarwal's use case from Lenny's Newsletter

## Tips

- Run from your git repository root
- Specify date ranges for focused changelogs
- Use your CHANGELOG_STYLE.md for consistent formatting
- Review and adjust the generated changelog before publishing
- Save output directly to CHANGELOG.md

## Related Use Cases

- Creating GitHub release notes
- Writing app store update descriptions
- Generating email updates for users
- Creating social media announcement posts


============================================================
END FILE: .fleet/factory/skills/changelog-generator/SKILL.md
============================================================

============================================================
FILE: .fleet/factory/skills/dspy-advanced/SKILL.md
============================================================

---
name: dspy-advanced
description: Advanced DSPy modules including ReAct agents, tool calling, output refinement (BestOfN, Refine), and adapters. Use when building agent systems, integrating external tools, or implementing multi-step reasoning.
---

# DSPy Advanced

Advanced DSPy modules for agents, tools, and output refinement.

## Quick Start

### ReAct Agent with Tools
```python
import dspy

# Define tools
