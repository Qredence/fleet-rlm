<!-- Chunk 1296: bytes 4764310-4766714, type=function -->
def test_skills():
    """Test skills repository."""
    print("\n" + "=" * 60)
    print("Testing Skills Repository")
    print("=" * 60)

    engine = create_engine(DATABASE_URL)
    with Session(engine) as session:
        repo = SkillRepository(session)

        # List all skills (should be empty initially)
        print("\nğŸ“‹ Listing all skills:")
        skills = repo.list(limit=10)
        if skills:
            for skill in skills:
                print(f"  â†’ {skill.name} ({skill.status})")
        else:
            print("  (No skills found)")

        # Create a test skill
        print("\nâ• Creating test skill...")
        try:
            skill_data = {
                "skill_path": "development/languages/python/test-skill",
                "name": "test-skill",
                "description": "A test skill for repository validation",
                "version": "1.0.0",
                "type": skill_type_enum.technical,
                "status": skill_status_enum.draft,
                "skill_content": "# Test Skill\n\nThis is a test skill.",
            }

            skill = repo.create_with_relations(
                skill_data=skill_data,
                capabilities=[],
                dependencies=[],
                keywords=["test", "repository"],
                tags=["test"],
            )
            print(f"  âœ“ Created skill: {skill.name} (ID: {skill.skill_id})")

            # Get the skill back
            print("\nğŸ” Retrieving skill by path...")
            retrieved = repo.get_by_path("development/languages/python/test-skill")
            if retrieved:
                print(f"  âœ“ Found: {retrieved.name}")
                print(f"     Description: {retrieved.description}")
                print(f"     Keywords: {[k.keyword for k in retrieved.keywords]}")
                print(f"     Tags: {[t.tag for t in retrieved.tags]}")

            # Search for skills
            print("\nğŸ” Searching for 'test'...")
            results = repo.search("test", limit=5)
            for r in results:
                print(f"  â†’ {r.name} (status: {r.status})")

            # Clean up
            print("\nğŸ—‘ï¸  Cleaning up test skill...")
            repo.delete(retrieved.skill_id)
            print("  âœ“ Test skill deleted")

        except Exception as e:
            print(f"  âŒ Error: {e}")
            import traceback

            traceback.print_exc()


