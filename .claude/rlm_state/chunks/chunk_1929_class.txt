<!-- Chunk 1929: bytes 7753021-7754240, type=class -->
class ReasoningTrace:
    """
    Single reasoning trace from a DSPy module call.

    Attributes:
        phase: Phase identifier (e.g., "phase1", "phase2")
        step: Step identifier (e.g., "extract_problem", "decide_novelty")
        timestamp: ISO format timestamp of when the trace was captured
        reasoning: Full LM reasoning output
        inputs: Input values provided to the module
        outputs: Output values returned by the module
        trace_id: Unique identifier for this trace (ISO format timestamp)

    """

    phase: str
    step: str
    timestamp: str
    reasoning: str
    inputs: dict[str, Any]
    outputs: dict[str, Any]
    trace_id: str = field(default_factory=lambda: datetime.now().isoformat())

    def to_dict(self) -> dict[str, Any]:
        """
        Convert trace to dictionary for JSON serialization.

        Returns:
            Dictionary representation of the trace

        """
        return {
            "trace_id": self.trace_id,
            "phase": self.phase,
            "step": self.step,
            "timestamp": self.timestamp,
            "reasoning": self.reasoning,
            "inputs": self.inputs,
            "outputs": self.outputs,
        }


