<!-- Chunk 1264: bytes 4700273-4701027, type=function -->
def cmd_optimize(args: argparse.Namespace) -> int:
    """Run optimization on skill creation program."""
    try:
        logger.info("Starting optimization...")
        logger.info(f"Optimizer: {args.optimizer or 'default (miprov2)'}")

        optimized_program, result = run_optimization(
            optimizer_type=args.optimizer,
            save_program=not args.no_save,
            program_name=args.name,
            verbose=True,
        )

        if args.json:
            print("\nJSON Output:")
            print(json.dumps(result.to_dict(), indent=2))

        # Return based on improvement
        return 0 if result.improvement >= 0 else 1

    except Exception as e:
        logger.error(f"Optimization failed: {e}")
        return 1


