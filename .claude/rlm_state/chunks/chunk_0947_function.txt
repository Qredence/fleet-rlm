<!-- Chunk 947: bytes 3411372-3412113, type=function -->
def validate_api_url(url: str) -> str:
    """Validate API URL uses secure protocol.

    Args:
        url: The API URL to validate.

    Returns:
        The validated URL.

    Raises:
        ValueError: If the URL doesn't use http:// or https://.
    """
    parsed = urlparse(url)

    if not parsed.scheme or parsed.scheme not in ('https', 'http'):
        raise ValueError(f"API URL must use http:// or https:// protocol: {url}")

    # Warn if using HTTP with non-localhost
    if parsed.scheme == 'http' and parsed.hostname not in ('localhost', '127.0.0.1'):
        import warnings
        warnings.warn(
            f"Using HTTP (non-HTTPS) for {url} may expose credentials",
            stacklevel=2
        )

    return url


