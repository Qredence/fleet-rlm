<!-- Chunk 1715: bytes 7294010-7295402, type=class -->
class AutoApprovalHandler(FeedbackHandler):
    """Automatic approval based on validation results."""

    def get_feedback(
        self,
        packaging_manifest: str,
        validation_report: dict,
        skill_content: str = "",
        task_description: str = "",
    ) -> str:
        """Auto-approve if validation passed, otherwise request revision."""
        passed_statuses = ["passed", "validated", "approved", "success"]
        is_passed = (
            validation_report.get("passed", False)
            or validation_report.get("status", "").lower() in passed_statuses
        )

        if is_passed:
            return json.dumps(
                {
                    "status": "approved",
                    "comments": "Validation passed - auto-approved",
                    "reviewer": "system",
                    "timestamp": datetime.now().isoformat(),
                }
            )
        else:
            errors = validation_report.get("errors", [])
            return json.dumps(
                {
                    "status": "needs_revision",
                    "comments": f"Validation errors: {', '.join(errors[:3]) if errors else 'Unknown validation error'}",
                    "suggested_changes": errors,
                    "reviewer": "system",
                    "timestamp": datetime.now().isoformat(),
                }
            )


