<!-- Chunk 2071: bytes 7978213-7979753, type=class -->
class TestFindTaxonomyPathModule:
    """Test FindTaxonomyPathModule."""

    def test_module_can_be_instantiated(self):
        """Should create instance with ChainOfThought."""
        module = FindTaxonomyPathModule()
        assert module is not None
        assert hasattr(module, "find_path")

    @patch("skill_fleet.core.modules.understanding.taxonomy.dspy.ChainOfThought")
    def test_forward_returns_path_analysis(self, mock_cot):
        """Should return taxonomy path recommendations."""
        mock_result = Mock()
        mock_result.recommended_path = "technical/frontend/react"
        mock_result.alternative_paths = ["web/react"]
        mock_result.path_rationale = "React is a frontend technology"
        mock_result.new_directories = []
        mock_result.confidence = 0.85

        mock_cot.return_value.return_value = mock_result

        module = FindTaxonomyPathModule()
        result = module.forward(
            task_description="Build a React app",
            requirements={"category": "frontend"},
            taxonomy_structure={"technical": {"frontend": []}},
            existing_skills=[],
        )

        assert isinstance(result, dict)
        assert result["recommended_path"] == "technical/frontend/react"
        assert result["confidence"] == 0.85
        assert isinstance(result["alternative_paths"], list)

    def test_confidence_is_normalized(self):
        """Should ensure confidence is in 0-1 range."""
        # This would require mocking to test specific edge cases
        pass


