<!-- Chunk 375: bytes 564796-565612, type=class -->
class Refiner(dspy.Module):
    def __init__(self, max_iterations=3):
        super().__init__()
        self.max_iterations = max_iterations
        self.generate = dspy.Predict(GenerateSignature)
        self.refine = dspy.Predict(RefineSignature)

    def forward(self, input_data: str):
        # Initial generation
        current = self.generate(input=input_data)

        # Iterative refinement
        for i in range(self.max_iterations):
            refined = self.refine(
                input=input_data,
                current=current.output,
                iteration=i + 1
            )

            if refined.improvement_score > 0.8:
                break

            current = refined

        return dspy.Prediction(output=current.output)
```

## Best Practices

### 1. Use Type Hints

```python
