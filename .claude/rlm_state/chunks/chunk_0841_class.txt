<!-- Chunk 841: bytes 2987727-2999619, type=class -->
class StreamingClient {
  private maxRetries: number = 3;
  private retryDelayMs: number = 1000;

  async streamChat(options: StreamingOptions): Promise<void> {
    let retries = 0;
    while (retries <= this.maxRetries) {
      try {
        // Stream SSE events
        return; // Success, no retry needed
      } catch (error) {
        // Check if retryable
        const isRetryable = error.includes("fetch") ||
                           error.includes("network") ||
                           error.includes("ECONNREFUSED");
        if (isRetryable && retries < this.maxRetries) {
          retries++;
          // Exponential backoff
          await new Promise(r => setTimeout(r, this.retryDelayMs * retries));
          continue;
        }
        throw error; // Non-retryable or max retries exceeded
      }
    }
  }
}
```
```

## Summary of Changes

### Architecture Updates
1. **Unified chat layout**: Replaced tab-based navigation with single conversational interface
2. **Component library**: Modular TypeScript components for ChatLayout, StreamingClient, useHitl
3. **Streaming improvements**: SSE-based streaming with robust retry logic (max 3 retries)
4. **HITL integration**: React hook (`useHitl`) for polling and prompt submission

### New CLI Commands
1. **`dev` command**: Starts API server and TUI together for development
   - Automatic health check waiting (30s timeout)
   - Process lifecycle management
   - Log output to `.skill_fleet_logs/api-dev.log`

### Enhanced CLI Features
1. **`serve` command improvements**:
   - Interactive configuration prompts
   - `--auto-accept` flag to skip prompts
   - `--force-plain-text` flag for plain-text prompts

### Documentation Gaps Addressed
1. ✅ TUI architecture documentation created
2. ✅ Dev command documentation created
3. ⏳ README.md needs updates (manual)
4. ⏳ CLI index.md needs updates (manual)
5. ⏳ Interactive chat.md needs updates (manual)
6. ⏳ Streaming quickstart needs updates (manual)
7. ⏳ Streaming architecture needs updates (manual)

## Testing Recommendations

After updating documentation:
1. Run quality script: `bash scripts/quality.sh`
2. Check for broken links
3. Verify code examples are accurate
4. Test TUI startup with dev command
5. Verify documentation reflects current implementation

## Next Steps

1. Apply updates to docs/README.md (manual file editing required)
2. Apply updates to docs/cli/index.md
3. Apply updates to docs/cli/interactive-chat.md
4. Apply updates to docs/STREAMING_QUICKSTART.md
5. Apply updates to docs/STREAMING_ARCHITECTURE.md
6. Run quality checks
7. Test all examples in updated documentation
8. Create pull request with documentation updates

## Additional Notes

### Why Manual Updates Required

The Edit tool requires exact string matching with whitespace. Some markdown sections (mermaid diagrams, tables) are difficult to match precisely. Manual editing may be more efficient for these changes.

### Files Successfully Created

- `docs/cli/tui-architecture.md` - Comprehensive TUI architecture (14 sections)
- `docs/cli/dev-command.md` - Complete dev command documentation (12 sections)

These files are ready for review and can be used as reference for the documentation updates above.


============================================================
END FILE: docs/archive/historical-notes/UPDATE_SUMMARY.md
============================================================

============================================================
FILE: docs/concepts/agentskills-compliance.md
============================================================

# agentskills.io Compliance Guide

This guide explains how the skill-fleet system implements the [agentskills.io](https://agentskills.io) specification for skill discoverability and standardization.

## Overview

The agentskills.io specification provides a standardized format for defining agent skills that can be discovered, validated, and integrated across different agentic systems.

**Note:** skill-fleet is aligning newly generated skills to match the published spec requirements; some legacy skills may require migration (directory/name alignment) to be strictly spec-compliant.

## What is agentskills.io?

agentskills.io is an open specification that defines:

- **Standard skill format**: YAML frontmatter in SKILL.md files with required metadata
- **Naming conventions**: kebab-case skill names for consistency
- **Discoverability**: XML format for injecting available skills into agent prompts
- **Validation rules**: Constraints on name format, description length, and required fields

## SKILL.md Format with YAML Frontmatter

All skills now include YAML frontmatter at the beginning of their `SKILL.md` files. This frontmatter provides machine-readable metadata about the skill.

### Required Fields

Per the agentskills.io spec, every skill must have:

- **`name`**: Kebab-case identifier (1-64 characters, lowercase alphanumeric + hyphens)
  - Example: `python-decorators`, `fastapi-development`, `code-quality-analysis`
  - **Must match the skill directory name** (the directory that contains `SKILL.md`)
- **`description`**: Human-readable description (1-1024 characters)

### Optional Fields

- **`license`**: License information (e.g., `MIT`, `Apache-2.0`)
- **`compatibility`**: Compatibility notes (max 500 characters)
- **`metadata`**: Extended metadata as key-value pairs
- **`allowed-tools`**: Space-delimited list of allowed tools

### Example Frontmatter

```yaml
---
name: python-decorators
description: Ability to design, implement, and apply higher-order functions to extend or modify the behavior of functions and classes in Python.
metadata:
  skill_id: technical_skills/programming/languages/python/python-decorators
  version: 1.0.0
  type: technical
  weight: medium
---
```

## Kebab-Case Naming Convention

### What is Kebab-Case?

Kebab-case uses lowercase letters with hyphens separating words:
- ✅ `python-decorators`
- ✅ `async-programming`
- ✅ `fastapi-development`
- ❌ `PythonDecorators` (PascalCase)
- ❌ `python_decorators` (snake_case)
- ❌ `pythonDecorators` (camelCase)

### Name Generation

The system automatically generates kebab-case names from path-style skill IDs using the `skill_id_to_name()` function.

Because the spec requires the `name` to match the skill directory name, the function derives the name from the **last path segment**:

```python
# Examples:
'technical_skills/programming/languages/python/python-decorators' → 'python-decorators'
'_core/reasoning' → 'core-reasoning'
'mcp_references/ (v2 standard, formerly capabilities/)tool_integration' → 'tool-integration'
'task_focus_areas/debug_fix' → 'debug-fix'
```

**Algorithm:**
1. Takes the last path segment (directory name)
2. Removes leading underscores
3. Converts underscores to hyphens
4. Returns lowercase kebab-case name

## Migration Guide

If you have existing skills without YAML frontmatter, use the migration command to update them:

### Migration Command

```bash
# Migrate all skills to agentskills.io format
uv run skill-fleet migrate

# Preview changes without writing (dry-run)
uv run skill-fleet migrate --dry-run

# Specify custom skills directory
uv run skill-fleet migrate --skills-root /path/to/skills

# Output results as JSON
uv run skill-fleet migrate --json
```

### What the Migration Does

The migration tool:

1. **Reads** existing `metadata.json` files
2. **Generates** kebab-case names from skill IDs
3. **Extracts** descriptions (from metadata or SKILL.md content)
4. **Creates** YAML frontmatter with required fields
5. **Prepends** frontmatter to existing SKILL.md content
6. **Updates** `metadata.json` with name and description if missing
7. **Validates** that existing frontmatter is compliant

### Migration Safety

- **Non-destructive**: Preserves existing content
- **Idempotent**: Safe to run multiple times (skips already-migrated skills)
- **Dry-run mode**: Preview changes before applying
- **Validation**: Checks frontmatter validity

### Migration Output

```bash
$ uv run skill-fleet migrate

============================================================
Migrating skills to agentskills.io format
Skills root: /path/to/skills
============================================================

Migrated: technical_skills/programming/languages/python/decorators -> python-decorators
  - Added YAML frontmatter
  - Added name to metadata.json

Migrated: task_focus_areas/debug_fix -> debug-fix
  - Added YAML frontmatter

Skipped: _core/reasoning -> core-reasoning
  - Frontmatter already present and valid

============================================================
Migration Summary:
  Total skills: 15
  Successful: 12
  Skipped (already compliant): 3
  Failed: 0
```

## XML Discoverability

The system can generate an `<available_skills>` XML block that follows the agentskills.io integration standard. This XML is designed to be injected into agent system prompts for skill discovery.

### Generate XML Command

```bash
# Print XML to stdout
uv run skill-fleet generate-xml

# Save to file
uv run skill-fleet generate-xml -o available_skills.xml

# Specify custom skills directory
uv run skill-fleet generate-xml --skills-root /path/to/skills
```

### XML Format

```xml
<available_skills>
  <skill>
    <name>python-decorators</name>
    <description>Ability to design, implement, and apply higher-order functions to extend or modify the behavior of functions and classes in Python.</description>
    <location>/path/to/skills/technical_skills/programming/languages/python/decorators/SKILL.md</location>
  </skill>
  <skill>
    <name>fastapi-development</name>
    <description>Build high-performance async web APIs with FastAPI framework.</description>
    <location>/path/to/skills/technical_skills/programming/web_frameworks/python/fastapi/SKILL.md</location>
  </skill>
  <!-- ... more skills ... -->
</available_skills>
```

### XML Use Cases

1. **Agent Context Injection**: Include in system prompts to inform agents of available skills
2. **Skill Discovery**: Parse to find skills matching specific criteria
3. **Documentation Generation**: Extract metadata for documentation systems
4. **Integration**: Share skill catalog with other agentskills.io-compliant systems

### API Usage

```python
from pathlib import Path
from skill_fleet.taxonomy.manager import TaxonomyManager

# Initialize taxonomy manager
taxonomy = TaxonomyManager(Path("skills"))

# Generate XML
xml = taxonomy.generate_available_skills_xml()

# Optionally filter by user (future feature)
xml = taxonomy.generate_available_skills_xml(user_id="developer_123")

# Write to file
Path("available_skills.xml").write_text(xml)
```

## Validation

The system validates agentskills.io compliance through the `SkillValidator.validate_frontmatter()` method.

### What is Validated

- ✅ SKILL.md file exists
- ✅ Frontmatter is present (starts with `---`)
- ✅ Frontmatter is valid YAML
- ✅ Required fields present (`name`, `description`)
- ✅ Name format is valid kebab-case (1-64 chars, lowercase alphanumeric + hyphens)
- ✅ Description length is 1-1024 characters
- ✅ Optional fields meet constraints (e.g., `compatibility` ≤ 500 chars)

### Validation Command

Validation is part of the standard `validate-skill` command:

```bash
# Validate a single skill
uv run skill-fleet validate-skill skills/technical_skills/programming/languages/python/decorators

# The output includes frontmatter validation results
```

### Validation in Code

```python
from pathlib import Path
from skill_fleet.validators.skill_validator import SkillValidator

validator = SkillValidator(Path("skills"))
result = validator.validate_frontmatter(
    Path("path/to/skill/SKILL.md")
)

if result.passed:
    print("✅ Frontmatter is valid")
else:
    print("❌ Validation errors:")
    for error in result.errors:
        print(f"  - {error}")
```

### Validation Result Structure

```python
@dataclass
