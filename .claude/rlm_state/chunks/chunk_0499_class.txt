<!-- Chunk 499: bytes 847008-849468, type=class -->
class MyAdapter(dspy.Adapter):
    pass
```

## Common Issues and Solutions

### Issue: Adapter Not Parsing Output

**Problem**: Adapter fails to parse LM output

**Solution**:
1. Check LM output format matches expectations
2. Verify signature field types are correct
3. Add error handling in parse() method
4. Test adapter with sample outputs

### Issue: Custom Adapter Not Used

**Problem**: DSPy uses default adapter instead of custom

**Solution**:
1. Verify adapter parameter is passed correctly
2. Check adapter is passed to dspy.Predict, not module
3. Ensure adapter class is defined before use

### Issue: LM Provider Not Supported

**Problem**: Can't configure LM for specific provider

**Solution**:
1. Use LiteLLM format: "provider/model"
2. Set api_base if provider has custom endpoint
3. Check provider is supported by LiteLLM
4. Implement custom LM client if needed

### Issue: Context Manager Not Switching LM

**Problem**: `dspy.context()` not changing LM locally

**Solution**:
1. Ensure LM object is valid
2. Check indentation of context block
3. Verify `with dspy.context(lm=...)` syntax
4. Use thread-safe configuration if needed


============================================================
END FILE: .fleet/skills/dspy-advanced/references/adapters.md
============================================================

============================================================
FILE: .fleet/skills/dspy-advanced/references/output-refinement.md
============================================================

# DSPy Output Refinement

Improve output quality through multiple attempts (BestOfN) or iterative refinement (Refine). This guide covers refinement strategies and patterns.

## Table of Contents

- [Output Refinement Overview](#output-refinement-overview)
- [BestOfN](#bestofn)
- [Refine](#refine)
- [Comparison](#comparison)
- [Reward Functions](#reward-functions)
- [Best Practices](#best-practices)

## Output Refinement Overview

### Why Refine Output?

- **Better quality**: Higher quality outputs through multiple attempts
- **Robustness**: Handle edge cases better
- **Consistency**: More reliable results
- **Confidence**: Select best from multiple candidates

### Refinement Strategies

1. **BestOfN**: Generate N candidates and select best
2. **Refine**: Iteratively improve with feedback loop

## BestOfN

### Basic BestOfN

Generate multiple candidates and select the best based on reward function:

```python
import dspy

