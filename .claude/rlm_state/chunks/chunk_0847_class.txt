<!-- Chunk 847: bytes 3005314-3013936, type=class -->
class SkillValidator:
    def validate_frontmatter(self, skill_md_path: Path) -> ValidationResult:
        """Validate SKILL.md has valid agentskills.io compliant YAML frontmatter.
        
        Checks:
        - name: 1-64 chars, lowercase alphanumeric + hyphens
        - description: 1-1024 chars
        - Optional fields meet constraints
        """
```

## References

- **agentskills.io specification**: https://agentskills.io
- **Migration module**: `src/skill_fleet/migration.py`
- **Validator**: `src/skill_fleet/validators/skill_validator.py`
- **Taxonomy manager**: `src/skill_fleet/taxonomy/manager.py`
- **Template**: `src/skill_fleet/config/templates/SKILL_md_template.md`

## Future Enhancements

- [ ] User-specific skill filtering in XML generation
- [ ] Automated compliance checking in CI/CD
- [ ] Integration with agentskills.io registry
- [ ] Support for skill versioning and deprecation
- [ ] Enhanced metadata validation rules

---

## Related Documentation

### System Documentation

| Topic | Description |
|-------|-------------|
| **[System Overview](overview.md)** - High-level architecture and taxonomy |
| **[Getting Started](getting-started/)** - Installation and quick start guide |
| **[CLI Documentation](cli/)** - `migrate` and `generate-xml` command reference |
| **[API Documentation](api/)** - Taxonomy and validation endpoints |

### Validation & Templates

- **[Developer Reference](concepts/developer-reference.md)** - Development workflows
- **Templates** - `config/templates/SKILL_md_template.md`, `config/templates/metadata_template.json`


============================================================
END FILE: docs/concepts/agentskills-compliance.md
============================================================

============================================================
FILE: docs/concepts/concept-guide.md
============================================================

# Skill Fleet Concepts

## Core Concepts

### Taxonomy & Skills
- Skills live under `skills/` with a hierarchical path (`domain/subdomain/topic`).
- Each skill includes `SKILL.md` (frontmatter + body) and `metadata.json` (version, type, load priority).
- The taxonomy manager (`src/skill_fleet/taxonomy/manager.py`) enforces naming, handles `register_skill()`, and generates XML for discoverability.

### DSPy Workflow Architecture

Skill Fleet uses a clean three-layer architecture:

1. **Signatures** (`core/signatures/`): Type definitions using `dspy.Signature`
2. **Modules** (`core/modules/`): Reusable business logic with `forward()`/`aforward()`
3. **Workflows** (`core/workflows/`): High-level orchestration with HITL support

The workflow executes three phases:
- **Understanding**: Requirements gathering, intent analysis, taxonomy path finding, dependency analysis
- **Generation**: Content generation using structured templates
- **Validation**: Compliance checking and quality assessment with auto-refinement

### HITL & Human Feedback
- The workflow supports HITL checkpoints at any phase: `clarify`, `confirm`, `preview`, `validate`
- HITL callbacks surface prompts to the CLI via the job system
- The CLI uses a shared runner to display prompts, capture feedback, and resume jobs
- Job states are managed by `JobManager` in `src/skill_fleet/api/services/`

### Templates & Compliance
- `config/templates/SKILL_md_template.md` describes required YAML frontmatter and body structure.
- `config/templates/metadata_template.json` outlines optional metadata fields (capabilities, dependencies, evolution).
- `TaxonomyManager.register_skill()` uses these templates to write consistent artifacts.

### Centralized DSPy Configuration

DSPy configuration is centralized in `skill_fleet.dspy`:

```python
from skill_fleet.dspy import configure_dspy, get_task_lm

# Configure once at startup
configure_dspy()

# Get task-specific language models
lm = get_task_lm("skill_understand")
edit_lm = get_task_lm("skill_edit")
```

### Opening a New Concept Document

When a concept requires more detail (e.g., DSPy workflows, taxonomy expansion), add a file under `docs/concepts/` and link it from here.

---

## Further Reading

### In-Depth Documentation

| Topic | Description |
|-------|-------------|
| **[Architecture Status](../architecture/restructuring-status.md)** | Current architecture overview and migration details |
| **[Import Path Guide](../development/IMPORT_PATH_GUIDE.md)** | Canonical import paths for the new architecture |
| **[API Documentation](../api/)** | REST API endpoints, schemas, jobs, middleware |
| **[CLI Documentation](../cli/)** | Command reference, interactive chat, architecture |
| **[HITL System](../hitl/)** | Callbacks, interactions, runner implementation |

### Concept Guides

- **[Developer Reference](developer-reference.md)** - Development workflows and patterns
- **[agentskills.io Compliance](agentskills-compliance.md)** - Schema and validation rules
- **[Getting Started](../getting-started/)** - Installation, quick start, templates

### Architecture Documentation

- **[Domain Layer](../architecture/DOMAIN_LAYER.md)** - DDD patterns and entities
- **[Service Layer](../architecture/SERVICE_LAYER.md)** - Service architecture
- **[Background Jobs](../architecture/BACKGROUND_JOBS.md)** - Job system design
- **[Caching Layer](../architecture/CACHING_LAYER.md)** - Caching implementation


============================================================
END FILE: docs/concepts/concept-guide.md
============================================================

============================================================
FILE: docs/concepts/developer-reference.md
============================================================

# Skill Fleet — Developer Guide

## 1. Purpose & Architecture

Skill Fleet combines:
- **FastAPI** for API endpoints that orchestrate DSPy workflows (`/api/v1/skills`, `/api/v1/quality`, `/api/v1/taxonomy`).
- **DSPy workflows** (`src/skill_fleet/core/workflows/`) implementing the three-phase skill creation pipeline with HITL support.
- **Typer CLI** wrapping the API (`src/skill_fleet/cli/`).
- **Taxonomy manager** (`src/skill_fleet/taxonomy/manager.py`) that enforces agentskills.io compliance and writes `metadata.json` + `SKILL.md`.
- **Templates** (`config/templates/SKILL_md_template.md`, `config/templates/metadata_template.json`) guide generated output.

## 2. Repository Layout

```
skill-fleet/
├── src/skill_fleet/
│   ├── api/              # FastAPI server, routes, schemas, services
│   ├── cli/              # Typer commands, shared HITL runner
│   ├── core/             # Domain logic + DSPy workflows
│   │   ├── modules/      # DSPy modules (understanding, generation, validation)
│   │   ├── signatures/   # DSPy signature definitions
│   │   ├── workflows/    # Workflow orchestration
│   │   ├── models.py     # Domain models
│   │   └── hitl/         # HITL handlers
│   ├── dspy/             # Centralized DSPy configuration ⭐
│   ├── taxonomy/         # Skill registration + metadata handling
│   ├── validators/       # agentskills.io validation rules
│   ├── infrastructure/   # Database, monitoring, tracing
│   └── common/           # Utilities (paths, async helpers, security)
├── config/               # Templates, config YAML, profile bootstrappers
├── docs/                 # Documentation
├── skills/               # Taxonomy content + metadata
├── tests/                # Pytest suites
├── .env.example
├── pyproject.toml
└── uv.lock
```

## 3. Core Development Workflows

### 3.1 Configure DSPy

Call `configure_dspy()` once during startup (API server does this by default).

```python
from skill_fleet.dspy import configure_dspy, get_task_lm

# Configure globally
configure_dspy()

# Get task-specific LMs when needed
lm = get_task_lm("skill_understand")
```

Keep `DSPY_CACHEDIR` and `DSPY_TEMPERATURE` in sync with environment.

### 3.2 Build + Run

Use `uv` for all Python commands:

```bash
uv sync --group dev
uv run skill-fleet serve
uv run pytest -q tests/unit
uv run ruff check src/skill_fleet
```

### 3.3 Developer CLI Commands

- `uv run skill-fleet create "..."` uses the API `POST /api/v1/skills/`.
- `uv run skill-fleet validate` and `migrate` operate directly on `skills/` and call `TaxonomyManager`.

**Note**: Some CLI commands are temporarily unavailable due to migration:
- `evaluate`, `evaluate-batch` - Use API directly
- `optimize` - Feature removed
- `onboard` - Feature removed

## 4. DSPy Workflow Architecture

### Layer 1: Signatures

Type definitions using `dspy.Signature`:

```python
# src/skill_fleet/core/signatures/understanding/requirements.py
import dspy

