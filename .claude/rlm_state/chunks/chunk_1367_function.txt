<!-- Chunk 1367: bytes 5072369-5073463, type=function -->
def long_running_task(task_id: str):
    try:
        task_store[task_id]["status"] = TaskStatus.PROCESSING

        # Do work
        result = process_heavy_computation()

        task_store[task_id]["status"] = TaskStatus.COMPLETED
        task_store[task_id]["result"] = result

    except Exception as e:
        task_store[task_id]["status"] = TaskStatus.FAILED
        task_store[task_id]["error"] = str(e)

@app.post("/process")
async def start_process(background_tasks: BackgroundTasks):
    task_id = str(uuid.uuid4())

    task_store[task_id] = {
        "status": TaskStatus.PENDING,
        "created_at": datetime.now()
    }

    background_tasks.add_task(long_running_task, task_id)

    return {
        "task_id": task_id,
        "status": TaskStatus.PENDING,
        "message": "Task started"
    }

@app.get("/tasks/{task_id}")
async def get_task_status(task_id: str):
    if task_id not in task_store:
        raise HTTPException(status_code=404, detail="Task not found")

    return task_store[task_id]
```

### 3. Persistent Task Storage (Database)

```python
# models.py
