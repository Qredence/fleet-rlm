<!-- Chunk 1833: bytes 7592044-7593364, type=function -->
def filesystem_research(query: str, workspace_path: Path, max_results: int = 10) -> dict[str, Any]:
    """
    Search filesystem using codebase_search and read_file tools.

    Uses semantic search to find relevant files and code snippets.

    Args:
        query: Search query string
        workspace_path: Root path of workspace to search
        max_results: Maximum number of results to return

    Returns:
        Dict with keys:
            - success: bool
            - files_found: list[str] of file paths
            - snippets: list[dict] with {file, content_snippet, relevance}
            - error: str | None
            - query: str

    """
    try:
        # Use codebase_search tool if available
        # For now, use a simple file search fallback
        results = _simple_file_search(query, workspace_path, max_results)

        return {
            "success": True,
            "files_found": results.get("files", []),
            "snippets": results.get("snippets", []),
            "error": None,
            "query": query,
        }
    except Exception as e:
        logger.warning(f"Filesystem search failed: {e}")
        return {
            "success": False,
            "files_found": [],
            "snippets": [],
            "error": str(e),
            "query": query,
        }


