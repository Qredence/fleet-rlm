<!-- Chunk 1873: bytes 7655924-7656990, type=class -->
class SkillReference(Base):
    """Cross-references between skills (see also)."""

    __tablename__ = "skill_references"

    source_skill_id: Mapped[int] = mapped_column(
        Integer, ForeignKey("skills.skill_id", ondelete="CASCADE"), primary_key=True
    )
    target_skill_id: Mapped[int] = mapped_column(
        Integer, ForeignKey("skills.skill_id", ondelete="CASCADE"), primary_key=True
    )
    reference_type: Mapped[str] = mapped_column(String(32), nullable=False, default="see_also")
    created_at: Mapped[datetime] = mapped_column(
        DateTime(timezone=True), nullable=False, server_default=func.now()
    )

    __table_args__ = (
        Index("idx_skill_references_source", "source_skill_id"),
        Index("idx_skill_references_target", "target_skill_id"),
        CheckConstraint("source_skill_id != target_skill_id", name="no_self_reference"),
    )


# =============================================================================
# DISCOVERY & SEARCH
# =============================================================================


