<!-- Chunk 1176: bytes 4474057-4476693, type=class -->
class SkillCreationProgram(dspy.Module):
    """Complete skill creation program (Steps 1-5).
    
    This program executes the core creation workflow without
    the HITL iteration step.
    """
    
    def __init__(self):
        super().__init__()
        self.understand = UnderstandModule()
        self.plan = PlanModule()
        self.initialize = InitializeModule()
        self.edit = EditModule()
        self.package = PackageModule()
    
    def forward(
        self,
        task_description: str,
        existing_skills: list,
        taxonomy_structure: dict,
        parent_skills_getter: callable
    ) -> Dict:
        """Execute Steps 1-5 of skill creation.
        
        Args:
            task_description: User's task description
            existing_skills: Currently mounted skills
            taxonomy_structure: Relevant taxonomy branches
            parent_skills_getter: Function to get parent skills for a path
        
        Returns:
            Dict with all outputs from Steps 1-5
        """
        
        # Step 1: UNDERSTAND
        understanding = self.understand(
            task_description=task_description,
            existing_skills=existing_skills,
            taxonomy_structure=taxonomy_structure
        )
        
        # Step 2: PLAN
        parent_skills = parent_skills_getter(understanding['taxonomy_path'])
        plan = self.plan(
            task_intent=understanding['task_intent'],
            taxonomy_path=understanding['taxonomy_path'],
            parent_skills=parent_skills,
            dependency_analysis=understanding['dependency_analysis']
        )
        
        # Step 3: INITIALIZE
        skeleton = self.initialize(
            skill_metadata=plan['skill_metadata'],
            capabilities=plan['capabilities'],
            taxonomy_path=understanding['taxonomy_path']
        )
        
        # Step 4: EDIT
        content = self.edit(
            skill_skeleton=skeleton['skill_skeleton'],
            parent_skills=understanding['parent_skills'],
            composition_strategy=plan['composition_strategy']
        )
        
        # Step 5: PACKAGE
        package = self.package(
            skill_content=content['skill_content'],
            skill_metadata=plan['skill_metadata'],
            taxonomy_path=understanding['taxonomy_path'],
            capability_implementations=content['capability_implementations']
        )
        
        return {
            'understanding': understanding,
            'plan': plan,
            'skeleton': skeleton,
            'content': content,
            'package': package
        }


