<!-- Chunk 1093: bytes 3921548-3922907, type=class -->
class SkillRevisionProgram(dspy.Module):
    """Program for revising existing skill content (Steps 4-5).
    
    Used when iteration requires content regeneration.
    """
    
    def __init__(self):
        super().__init__()
        self.edit = EditModule()
        self.package = PackageModule()
    
    def forward(
        self,
        skeleton: Dict,
        parent_skills: str,
        composition_strategy: str,
        plan: Dict,
        taxonomy_path: str,
        revision_feedback: Optional[str] = None
    ) -> Dict:
        """Regenerate and repackage skill content.
        
        Returns:
            Dict with revised content and package
        """
        
        # Step 4: EDIT (with feedback)
        content = self.edit(
            skill_skeleton=skeleton['skill_skeleton'],
            parent_skills=parent_skills,
            composition_strategy=composition_strategy,
            revision_feedback=revision_feedback
        )
        
        # Step 5: PACKAGE
        package = self.package(
            skill_content=content['skill_content'],
            skill_metadata=plan['skill_metadata'],
            taxonomy_path=taxonomy_path,
            capability_implementations=content['capability_implementations']
        )
        
        return {
            'content': content,
            'package': package
        }


