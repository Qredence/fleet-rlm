<!-- Chunk 1950: bytes 7805307-7807488, type=function -->
def try_load_skill_by_id(
    skill_id: str,
    skills_root: Path,
    resolve_func: Callable,
) -> SkillMetadata | None:
    """
    Try to load skill metadata from disk by skill ID.

    Attempts to load from both directory-form and single-file skill formats.

    Args:
        skill_id: The skill identifier to load
        skills_root: Root directory of the taxonomy
        resolve_func: Function to resolve skill ID to canonical path

    Returns:
        SkillMetadata if found, None otherwise

    """
    from ..common.security import resolve_path_within_root

    try:
        canonical_path = resolve_func(skill_id)
    except FileNotFoundError:
        return None

    # Directory-form skill
    skill_dir = resolve_path_within_root(skills_root, canonical_path)
    if (skill_dir / "metadata.json").exists():
        return load_skill_dir_metadata(skill_dir)

    # Single-file skill
    skill_file = resolve_path_within_root(skills_root, f"{canonical_path}.json")
    if skill_file.exists():
        return load_skill_file(skill_file)

    return None


============================================================
END FILE: src/skill_fleet/taxonomy/skill_loader.py
============================================================

============================================================
FILE: src/skill_fleet/taxonomy/skill_registration.py
============================================================

"""
Skill registration utilities for taxonomy management.

Handles registering new skills to the taxonomy, including:
- Creating directory structure
- Writing metadata.json and SKILL.md
- agentskills.io compliance (YAML frontmatter)
- Populating extra files and subdirectories
"""

from __future__ import annotations

import asyncio
import json
import logging
from datetime import UTC, datetime
from typing import TYPE_CHECKING, Any

import yaml

from ..common.security import (
    is_safe_path_component,
    resolve_path_within_root,
    sanitize_relative_file_path,
    sanitize_taxonomy_path,
)
from .metadata import SkillMetadata
from .naming import skill_id_to_name

if TYPE_CHECKING:
    from pathlib import Path

logger = logging.getLogger(__name__)


