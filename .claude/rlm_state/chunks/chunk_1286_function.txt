<!-- Chunk 1286: bytes 4744250-4747319, type=function -->
def main():
    """Main setup workflow."""
    print("\n" + "=" * 70)
    print("ğŸš€ DSPy TRACKING & MLflow SETUP")
    print("=" * 70)

    # Step 1: Configure DSPy tracking
    print("\nğŸ“‹ Step 1: Configure DSPy for production tracking")
    configure_dspy_for_tracking()

    # Step 2: Setup MLflow integration
    print("\nğŸ“‹ Step 2: Setup MLflow integration")
    mlflow_available = setup_mlflow_integration()

    # Step 3: Create configuration
    print("\nğŸ“‹ Step 3: Create tracking configuration")
    config = create_tracking_config()

    # Step 4: Print summary
    print_tracking_summary(config, mlflow_available)

    # Step 5: Test configuration
    print("\nğŸ“‹ Step 5: Test configuration")
    print("Testing DSPy configuration with sample run...")

    try:
        # Configure LM with usage tracking
        lm = get_lm("gemini-3-flash-preview", temperature=1.0)
        dspy.configure(lm=lm, track_usage=True)

        # Create simple program
        class TestProgram(dspy.Module):
            def __init__(self):
                super().__init__()
                from skill_fleet.core.dspy.signatures.phase1_understanding import GatherRequirements

                self.gather = dspy.ChainOfThought(GatherRequirements)

            def forward(self, task_description: str):
                return self.gather(task_description=task_description)

        program = TestProgram()

        # Run test prediction
        print("  Running test prediction...")
        result = program(task_description="Create a Python async skill")

        # Check if result has tracking info
        print("  âœ… Test prediction successful")
        print(f"  Result: {result}")
        print(f"  Result fields: {list(result.keys())}")

    except Exception as e:
        logger.error(f"Test failed: {e}")
        print("  âš ï¸  Test encountered error (this is expected)")

    print("\n" + "=" * 70)
    print("ğŸ‰ SETUP COMPLETE - DSPy tracking is ready!")
    print("=" * 70)
    print("\nğŸ“š Documentation:")
    print("  - DSPy v3.1.0: https://dspy.ai")
    print("  - MLflow docs: https://mlflow.org/docs/latest/index.html")
    print("  - Skills-fleet docs: docs/dspy/")
    print("=" * 70 + "\n")


if __name__ == "__main__":
    main()


============================================================
END FILE: scripts/internal/opt/setup_dspy_tracking.py
============================================================

============================================================
FILE: scripts/internal/tests/test_db_sync.py
============================================================

#!/usr/bin/env python3
"""
Test Database Sync Commands

Verifies that export-to-db and import-from-db commands work correctly.
"""

import os
import sys
from pathlib import Path

# Add parent directory to path
sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from dotenv import load_dotenv
from typer.testing import CliRunner

load_dotenv()

# Import CLI app
from skill_fleet.cli.app import app  # noqa: E402

# Initialize CLI runner
runner = CliRunner()


