<!-- Chunk 922: bytes 3348470-3348878, type=function -->
def process_payment(user_id: int, amount: float, card: dict) -> dict:
    # Blocking database call
    result = db.execute(f"SELECT * FROM users WHERE id = {user_id}")
    # Business logic
    if result['balance'] < amount:
        raise ValueError("Insufficient funds")
    # Process payment
    return {"status": "success", "transaction_id": "123"}

# main.py - naive FastAPI wrapper
@app.post("/payment")
