<!-- Chunk 1877: bytes 7659062-7660912, type=class -->
class SkillFile(Base):
    """Associated files and resources for skills."""

    __tablename__ = "skill_files"

    file_id: Mapped[int] = mapped_column(Integer, primary_key=True)
    skill_id: Mapped[int] = mapped_column(
        Integer, ForeignKey("skills.skill_id", ondelete="CASCADE"), nullable=False
    )
    file_type: Mapped[str] = mapped_column(
        Enum(
            FileTypeEnum.REFERENCE,
            FileTypeEnum.GUIDE,
            FileTypeEnum.TEMPLATE,
            FileTypeEnum.SCRIPT,
            FileTypeEnum.EXAMPLE,
            FileTypeEnum.ASSET,
            FileTypeEnum.TEST,
            name="file_type_enum",
            create_constraint=True,
        ),
        nullable=False,
    )
    relative_path: Mapped[str] = mapped_column(String(512), nullable=False)
    filename: Mapped[str] = mapped_column(String(256), nullable=False)
    content: Mapped[str | None] = mapped_column(Text, nullable=True)
    binary_data: Mapped[bytes | None] = mapped_column(BYTEA, nullable=True)
    file_size_bytes: Mapped[int | None] = mapped_column(Integer, nullable=True)
    checksum: Mapped[str | None] = mapped_column(String(64), nullable=True)
    description: Mapped[str | None] = mapped_column(Text, nullable=True)
    sort_order: Mapped[int] = mapped_column(Integer, default=0)
    created_at: Mapped[datetime] = mapped_column(
        DateTime(timezone=True), nullable=False, server_default=func.now()
    )
    updated_at: Mapped[datetime] = mapped_column(
        DateTime(timezone=True), nullable=False, server_default=func.now()
    )

    # Relationships
    skill: Mapped["Skill"] = relationship("Skill", back_populates="files")

    __table_args__ = (
        Index("idx_skill_files_skill", "skill_id"),
        Index("idx_skill_files_type", "file_type"),
        Index("idx_skill_files_path", "relative_path"),
    )


