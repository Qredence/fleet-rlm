<!-- Chunk 1883: bytes 7669994-7672045, type=class -->
class ValidationReport(Base):
    """Skill validation results."""

    __tablename__ = "validation_reports"

    report_id: Mapped[int] = mapped_column(Integer, primary_key=True)
    skill_id: Mapped[int | None] = mapped_column(
        Integer, ForeignKey("skills.skill_id", ondelete="SET NULL"), nullable=True
    )
    job_id: Mapped[UUID | None] = mapped_column(
        ForeignKey("jobs.job_id", ondelete="SET NULL"), nullable=True
    )
    status: Mapped[str] = mapped_column(
        Enum(
            ValidationStatusEnum.PASSED,
            ValidationStatusEnum.FAILED,
            ValidationStatusEnum.WARNINGS,
            name="validation_status_enum",
            create_constraint=True,
        ),
        nullable=False,
    )
    passed: Mapped[bool] = mapped_column(Boolean, nullable=False)
    score: Mapped[float] = mapped_column(Integer, nullable=False)
    errors: Mapped[list[str] | None] = mapped_column(ARRAY(String), nullable=True)
    warnings: Mapped[list[str] | None] = mapped_column(ARRAY(String), nullable=True)
    checks_performed: Mapped[list[str] | None] = mapped_column(ARRAY(String), nullable=True)
    quality_score: Mapped[float | None] = mapped_column(Integer, nullable=True)
    completeness_score: Mapped[float | None] = mapped_column(Integer, nullable=True)
    compliance_score: Mapped[float | None] = mapped_column(Integer, nullable=True)
    created_at: Mapped[datetime] = mapped_column(
        DateTime(timezone=True), nullable=False, server_default=func.now()
    )

    # Relationships
    skill: Mapped[Optional["Skill"]] = relationship("Skill", back_populates="validation_reports")
    checks: Mapped[list["ValidationCheck"]] = relationship(
        "ValidationCheck", back_populates="report", cascade="all, delete-orphan"
    )

    __table_args__ = (
        Index("idx_validation_reports_skill", "skill_id"),
        Index("idx_validation_reports_job", "job_id"),
        Index("idx_validation_reports_status", "status"),
        Index("idx_validation_reports_created_at", "created_at"),
    )


