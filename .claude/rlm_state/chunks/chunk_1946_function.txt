<!-- Chunk 1946: bytes 7799952-7801761, type=function -->
def get_branch_structure(
    branch_path: str,
    skills_root: Path,
) -> dict[str, str]:
    """
    Get directory structure of a taxonomy branch.

    Args:
        branch_path: The branch path to get structure for
        skills_root: Root directory of the taxonomy

    Returns:
        Dictionary mapping subdirectory names to "available" status

    """
    from ..common.security import resolve_path_within_root, sanitize_taxonomy_path

    safe_branch_path = sanitize_taxonomy_path(branch_path)
    if safe_branch_path is None:
        return {}

    full_path = resolve_path_within_root(skills_root, safe_branch_path)
    if not full_path.exists():
        return {}

    structure: dict[str, str] = {}
    for item in full_path.iterdir():
        if item.is_dir() and not item.name.startswith("_"):
            structure[item.name] = "available"
    return structure


============================================================
END FILE: src/skill_fleet/taxonomy/path_resolver.py
============================================================

============================================================
FILE: src/skill_fleet/taxonomy/skill_loader.py
============================================================

"""
Skill loading utilities for taxonomy management.

Handles loading skill metadata from various storage formats:
- Single-file JSON skills
- Directory-based skills with metadata.json
- agentskills.io compliant skills with YAML frontmatter
"""

from __future__ import annotations

import json
import logging
from typing import TYPE_CHECKING, Any

import yaml

if TYPE_CHECKING:
    from collections.abc import Callable


from .metadata import SkillMetadata
from .naming import skill_id_to_name

if TYPE_CHECKING:
    from pathlib import Path

logger = logging.getLogger(__name__)


