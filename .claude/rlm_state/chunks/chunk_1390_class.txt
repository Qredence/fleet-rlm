<!-- Chunk 1390: bytes 5114829-5118338, type=class -->
class UserUpdate(BaseModel):
    name: Optional[str] = None
    email: Optional[EmailStr] = None
    age: Optional[int] = None

# 2. Extract only provided fields
update_data = user_update.model_dump(exclude_unset=True)

# 3. Handle empty updates
if not update_data:
    return existing_user

# 4. Apply partial updates
updated_user = existing_user.model_copy(update=update_data)
```

### Common Mistakes to Avoid

1. **Don't use `model_dump()` without `exclude_unset=True`**
   - Will include all fields as None
   - Would overwrite existing data with None

2. **Don't use required fields in update model**
   - Defeats the purpose of PATCH
   - Clients must provide all fields

3. **Don't mutate the original object**
   - Use `model_copy()` instead of `setattr()`
   - Maintains immutability (idiomatic Pydantic)

---

## 6. Files Created

1. **patch_endpoint_example.py**
   - Complete FastAPI application
   - Pydantic models (User, UserCreate, UserUpdate)
   - CRUD endpoints (GET, POST, PATCH, DELETE)
   - In-memory database simulation
   - Can be run as a server

2. **test_patch_endpoint.py**
   - Comprehensive test suite
   - Demonstrates all scenarios
   - Shows Pydantic mechanics
   - All tests pass

3. **visual_guide.py**
   - Step-by-step visual explanation
   - Shows request/response flow
   - Compares PUT vs PATCH
   - Explains key mechanisms

4. **PATCH_ENDPOINT_README.md**
   - Detailed documentation
   - Code examples
   - Common mistakes
   - Usage instructions

5. **IMPLEMENTATION_SUMMARY.md** (this file)
   - Executive summary
   - Quick reference
   - All file locations

---

## 7. Quick Reference

### Run the Server
```bash
# Navigate to the examples directory from the repository root
cd skills/technical_skills/programming/web_frameworks/python/fastapi/examples

uv run python patch_endpoint_example.py
```

### Run Tests
```bash
uv run python test_patch_endpoint.py
```

### View Visual Guide
```bash
uv run python visual_guide.py
```

### Test with curl
```bash
# Update only name
curl -X PATCH http://localhost:8000/users/1 \\
  -H "Content-Type: application/json" \\
  -d '{"name": "Updated Name"}'

# Update only age
curl -X PATCH http://localhost:8000/users/1 \\
  -H "Content-Type: application/json" \\
  -d '{"age": 35}'

# Update multiple fields
curl -X PATCH http://localhost:8000/users/1 \\
  -H "Content-Type: application/json" \\
  -d '{"name": "New Name", "email": "new@example.com"}'
```

---

## Conclusion

This implementation demonstrates the **idiomatic FastAPI/Pydantic way** to handle PATCH requests with partial updates:

- Clean, type-safe code
- Proper handling of all edge cases
- Comprehensive test coverage
- Clear documentation

The pattern is reusable for any PATCH endpoint in FastAPI applications.


============================================================
END FILE: skills/python/fastapi-production/examples/02-partial-updates/IMPLEMENTATION_SUMMARY.md
============================================================

============================================================
FILE: skills/python/fastapi-production/examples/02-partial-updates/PATCH_ENDPOINT_README.md
============================================================

# FastAPI PATCH Endpoint - Partial Updates Implementation

## Overview

This implementation demonstrates how to create a PATCH endpoint for updating users that only updates the fields provided in the request, leaving other fields unchanged.

## Key Components

### 1. Pydantic Model for Updates

```python
