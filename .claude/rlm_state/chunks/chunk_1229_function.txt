<!-- Chunk 1229: bytes 4619743-4621883, type=function -->
def parse_markdown_table(md_content):
    """Simple parser for the specific markdown table format in the report."""
    rows = []
    lines = md_content.splitlines()
    in_table = False

    for line in lines:
        if line.strip().startswith("| Skill ID"):
            in_table = True
            continue
        if not in_table:
            continue
        if line.strip().startswith("|---"):
            continue
        if line.strip().startswith("| :---"):
            continue
        if not line.strip().startswith("|"):
            continue

        # Parse logic
        parts = [p.strip() for p in line.split("|") if p.strip()]
        if len(parts) >= 3:
            skill_id_raw = parts[0].replace("**", "").replace("`", "")
            current_path = parts[1].replace("`", "")
            canonical_path = parts[2].replace("`", "").replace("skills/", "")  # Rel to skills root
            facets_raw = parts[3] if len(parts) > 3 else ""

            # Simple handling for the drafts case with "..."
            if "..." in current_path:
                print(f"Skipping incomplete draft path: {current_path}")
                continue

            # Handle N/A
            if "(N/A" in current_path:
                print(f"Skipping N/A path for {skill_id_raw}")
                continue

            # Parse facets
            facets = {}
            if facets_raw:
                for f in facets_raw.split(","):
                    if ":" in f:
                        k, v = f.split(":", 1)
                        facets[k.strip()] = v.strip()

            # Canonical path usually implies the structure
            # e.g. python/async -> python.async

            # Strip "skills/" prefix from current_path if present for consistency
            if current_path.startswith("skills/"):
                current_path = current_path[7:]

            rows.append(
                {
                    "skill_id": skill_id_raw,
                    "current_path": current_path,
                    "canonical_path": canonical_path,
                    "facets": facets,
                }
            )

    return rows


