<!-- Chunk 1779: bytes 7428420-7430492, type=class -->
class OptimizationWrapper(dspy.Module):
    """
    Wrapper for optimization that provides dummy context.

    This is necessary because the training set only provides task_description,
    but the program expects comprehensive context arguments.
    """

    def __init__(self, program: LegacySkillCreationProgram):
        super().__init__()
        self.program = program

    def forward(self, task_description: str):
        """
        Execute the wrapped program with dummy context for optimization.

        Args:
            task_description: Description of the skill creation task

        Returns:
            dspy.Prediction: Wrapped result containing understanding, plan,
                skeleton, content, and package predictions

        """

        # Create minimal/dummy context for optimization
        def dummy_parent_getter(path: str) -> list[dict]:
            """
            Dummy parent skill getter for optimization context.

            Args:
                path: Path to get parent skills for (ignored)

            Returns:
                Empty list for optimization purposes

            """
            return []

        result = self.program(
            task_description=task_description,
            existing_skills=[],  # Dummy empty list
            taxonomy_structure={},  # Dummy empty dict
            parent_skills_getter=dummy_parent_getter,
        )

        # Wrap dict in dspy.Prediction to support dot access in metrics
        return dspy.Prediction(
            understanding=dspy.Prediction(**result["understanding"]),
            plan=dspy.Prediction(**result["plan"]),
            skeleton=dspy.Prediction(**result["skeleton"]),
            content=dspy.Prediction(**result["content"]),
            package=dspy.Prediction(**result["package"]),
        )


# =============================================================================
# MIPROv2 Optimization
# =============================================================================


from ...config.training.manager import TrainingDataManager  # noqa: E402


