<!-- Chunk 2120: bytes 8046485-8047789, type=function -->
def test_update_scores(temp_training_dir):
    """Test score updates."""
    manager = TrainingDataManager(temp_training_dir)

    # Setup initial metadata
    import hashlib

    id1 = hashlib.md5(b"Task 1").hexdigest()

    manager._metadata = {
        id1: ExampleMetadata(
            example_id=id1,
            task_description="Task 1",
            category="technical",
            quality_score=0.5,
            success_rate=0.5,
        )
    }

    # Update
    results = [{"example_id": id1, "score": 1.0, "passed": True}]

    manager.update_scores(results)

    # Check updates (moving average)
    meta = manager._metadata[id1]
    assert meta.quality_score > 0.5  # Should increase
    assert meta.success_rate > 0.5  # Should increase

    # Verify persistence
    assert (temp_training_dir / "example_metadata.json").exists()


============================================================
END FILE: tests/unit/test_training_manager.py
============================================================

============================================================
FILE: tests/unit/test_workflow_feedback.py
============================================================

import json

import pytest

from skill_fleet.core.hitl import (
    AutoApprovalHandler,
    create_feedback_handler,
)


