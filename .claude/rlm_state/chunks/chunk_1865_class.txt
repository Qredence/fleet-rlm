<!-- Chunk 1865: bytes 7648430-7649170, type=class -->
class TaxonomyClosure(Base):
    """Closure table for efficient tree queries on taxonomy."""

    __tablename__ = "taxonomy_closure"

    ancestor_id: Mapped[int] = mapped_column(
        Integer, ForeignKey("taxonomy_categories.category_id", ondelete="CASCADE"), primary_key=True
    )
    descendant_id: Mapped[int] = mapped_column(
        Integer, ForeignKey("taxonomy_categories.category_id", ondelete="CASCADE"), primary_key=True
    )
    depth: Mapped[int] = mapped_column(Integer, nullable=False, primary_key=True)

    __table_args__ = (
        Index("idx_taxonomy_closure_ancestor", "ancestor_id"),
        Index("idx_taxonomy_closure_descendant", "descendant_id"),
        Index("idx_taxonomy_closure_depth", "depth"),
    )


