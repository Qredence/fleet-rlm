<!-- Chunk 1251: bytes 4669938-4670559, type=function -->
def evaluate_program(
    program: dspy.Module,
    testset: list[dspy.Example],
    metric,
) -> float:
    """Evaluate program and return score."""
    from dspy.evaluate import Evaluate

    evaluator = Evaluate(
        devset=testset,
        metric=metric,
        num_threads=4,
        display_progress=False,  # Suppress progress for cleaner output
    )

    score = evaluator(program)

    if hasattr(score, "__float__") or isinstance(score, (int, float)):
        return float(score)
    else:
        try:
            return float(str(score))
        except (ValueError, TypeError):
            return 0.0


