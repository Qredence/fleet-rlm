<!-- Chunk 1570: bytes 6468511-6474633, type=class -->
class JobDetailResponse(BaseModel):
    """
    Response model for job details.

    Contains all job status information including progress, results,
    and HITL interaction data.
    """

    job_id: str = Field(..., description="Job ID")
    status: str = Field(..., description="Job status")
    task_description: str = Field(..., description="Task description")
    user_id: str = Field(..., description="User ID")
    current_phase: str | None = Field(None, description="Current phase")
    progress_message: str | None = Field(None, description="Progress message")
    error: str | None = Field(None, description="Error message")
    result: dict | None = Field(None, description="Job result")
    draft_path: str | None = Field(None, description="Draft path")
    intended_taxonomy_path: str | None = Field(None, description="Intended taxonomy path")
    validation_passed: bool | None = Field(None, description="Validation passed")
    validation_status: str | None = Field(None, description="Validation status")
    validation_score: float | None = Field(None, description="Validation score")
    hitl_type: str | None = Field(None, description="HITL interaction type")


@router.get("/{job_id}")
async def get_job_status(job_id: str) -> JobDetailResponse:
    """
    Get job status and details.

    Args:
        job_id: The job ID to retrieve

    Returns:
        JobDetailResponse with job status and details

    Raises:
        NotFoundException: If job not found (404)

    """
    job = get_job(job_id)
    if not job:
        raise NotFoundException("Job", job_id)

    return JobDetailResponse(
        job_id=job.job_id,
        status=job.status,
        task_description=getattr(job, "task_description", ""),
        user_id=getattr(job, "user_id", "default"),
        current_phase=job.current_phase,
        progress_message=job.progress_message,
        error=job.error,
        result=job.result.model_dump() if job.result else None,
        draft_path=job.draft_path,
        intended_taxonomy_path=job.intended_taxonomy_path,
        validation_passed=job.validation_passed,
        validation_status=job.validation_status,
        validation_score=job.validation_score,
        hitl_type=job.hitl_type,
    )


============================================================
END FILE: src/skill_fleet/api/v1/jobs.py
============================================================

============================================================
FILE: src/skill_fleet/api/v1/optimization.py
============================================================

"""
Signature optimization routes for v1 API.

This module provides endpoints for signature optimization operations.
These routes use signature optimization workflow orchestrators.

Endpoints:
    POST /api/v1/optimization/analyze - Validate skill or content
    POST /api/v1/optimization/improve - Assess quality of content
    POST /api/v1/optimization/compare - Auto-fix issues in content

Note: These endpoints are temporarily unavailable pending migration to new workflow architecture.
"""

from __future__ import annotations

import logging
from typing import TYPE_CHECKING

from fastapi import APIRouter, HTTPException

from ..schemas.optimization import (
    AnalyzeFailuresRequest,
    AnalyzeFailuresResponse,
    CompareRequest,
    CompareResponse,
    ImproveRequest,
    ImproveResponse,
)

logger = logging.getLogger(__name__)

router = APIRouter()

if TYPE_CHECKING:
    pass


@router.post("/analyze", response_model=AnalyzeFailuresResponse)
async def analyze_failures(request: AnalyzeFailuresRequest) -> AnalyzeFailuresResponse:
    """
    Analyze signature failures to identify root causes.

    Temporarily unavailable - pending migration to new workflow architecture.
    """
    raise HTTPException(
        status_code=503,
        detail="Signature optimization is temporarily unavailable. Migration to new workflow architecture in progress.",
    )


@router.post("/improve", response_model=ImproveResponse)
async def improve_signature(request: ImproveRequest) -> ImproveResponse:
    """
    Propose improvements for a signature.

    Temporarily unavailable - pending migration to new workflow architecture.
    """
    raise HTTPException(
        status_code=503,
        detail="Signature optimization is temporarily unavailable. Migration to new workflow architecture in progress.",
    )


@router.post("/compare", response_model=CompareResponse)
async def compare_signatures(request: CompareRequest) -> CompareResponse:
    """
    A/B test two signatures against each other.

    Temporarily unavailable - pending migration to new workflow architecture.
    """
    raise HTTPException(
        status_code=503,
        detail="Signature optimization is temporarily unavailable. Migration to new workflow architecture in progress.",
    )


============================================================
END FILE: src/skill_fleet/api/v1/optimization.py
============================================================

============================================================
FILE: src/skill_fleet/api/v1/quality.py
============================================================

"""
Quality assurance routes for v1 API.

This module provides endpoints for quality operations.
These routes use quality workflow orchestrators.

Endpoints:
    POST /api/v1/quality/validate - Validate skill or content
    POST /api/v1/quality/assess - Assess quality of content
    POST /api/v1/quality/fix - Auto-fix issues in content
"""

from __future__ import annotations

import logging
from typing import Annotated

from fastapi import APIRouter, Depends, HTTPException

from skill_fleet.core.workflows.skill_creation.validation import ValidationWorkflow

from ..dependencies import get_skill_service
from ..exceptions import NotFoundException
from ..schemas.quality import (
    AssessQualityRequest,
    AssessQualityResponse,
    AutoFixRequest,
    AutoFixResponse,
    ValidateRequest,
    ValidateResponse,
)
from ..services.skill_service import SkillService

logger = logging.getLogger(__name__)

router = APIRouter()


