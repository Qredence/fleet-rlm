<!-- Chunk 719: bytes 2180939-2215915, type=function -->
def sync_blocking_call():
    # This remains blocking, but...
    return requests.get("https://example.com").text

async def main():
    # ...we run it in a separate thread so the loop stays free
    result = await asyncio.to_thread(sync_blocking_call)
    print(result)
```

### 4. Robust Cancellation and Cleanup
Tasks can be cancelled at any `await` point. Use `try...finally` to ensure resources are released.

✅ **Production Pattern: Safe Cancellation**
```python
async def managed_resource():
    conn = await get_connection()
    try:
        await process_data(conn)
    finally:
        # ALWAYS release resources in 'finally'
        # Cancellation occurs at 'await process_data', 
        # but finally block will still execute.
        await conn.close()
```

### 5. Defensive Programming: Timeouts
NEVER wait indefinitely for an external resource.

✅ **Production Pattern: `asyncio.timeout`**
```python
try:
    async with asyncio.timeout(5.0): # 5 second hard limit
        result = await long_running_api_call()
except TimeoutError:
    print("API failed to respond in time")
```

---

## Real-World Impact

| Metric | Synchronous/Threaded | Asynchronous |
| :--- | :--- | :--- |
| **Throughput** | Limited by OS context switching overhead | Scales to 10k+ concurrent connections |
| **Memory Usage** | High (~1MB per thread stack) | Low (~2KB per coroutine) |
| **Latency** | Serial execution wait times | Concurrent execution (lowest common denominator) |
| **System Health** | Resource starvation under load | Graceful degradation via semaphores |

**Measured Outcome**: Converting a standard REST proxy from sync to async typically reduces P99 latency by 40-70% when dealing with high-latency upstream dependencies.

---

## Validation and Debugging

### Loop Lag Monitoring
A healthy async app should spend minimal time "blocked". You can detect loop lag using the `asyncio` debug mode.

```bash
# Run with debug mode enabled to find blocking calls
PYTHONASYNCIODEBUG=1 python your_script.py
```

### Common CLI Validation
Use `pytest-asyncio` for testing async logic.
```bash
# Install testing tools
pip install pytest-asyncio httpx

# Run tests
pytest --asyncio-mode=auto
```

### Progressive Disclosure
- **[references/task_management.md](references/task_management.md)**: Deep dive into TaskGroup vs gather vs Wait.
- **[references/sync_bridge.md](references/sync_bridge.md)**: Advanced thread pool and executor configuration.
- **[guides/troubleshooting-loop-lag.md](guides/troubleshooting-loop-lag.md)**: Step-by-step guide to profiling and fixing blocking calls.

============================================================
END FILE: data/mlflow/runs/330001648406427495/2a8000d86d6548a8b79496545e5df469/artifacts/skill_content.md
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2a8000d86d6548a8b79496545e5df469/artifacts/skill_metadata.json
============================================================

"skill_id='python/async-programming' name='async-programming' description='Use when Python applications exhibit I/O-bound performance bottlenecks, unresponsive event loops due to hidden blocking calls, or complex task orchestration needs. Triggers include high-latency API integrations, race conditions in concurrent operations, or the need to bridge legacy synchronous libraries into an asynchronous architecture.' version='1.0.0' type='technical' weight='medium' load_priority='task_specific' dependencies=[] capabilities=[] category='python' keywords=['asyncio', 'await', 'concurrency', 'non-blocking', 'task-group', 'event-loop', 'python-performance'] scope='Covers core asyncio patterns, structured concurrency (TaskGroups), and sync/async bridging. Does not cover multiprocessing or low-level event loop internals.' see_also=['python/concurrency-patterns', 'python/testing-async-code'] tags=['python', 'asyncio', 'concurrency', 'performance-optimization', 'backend'] taxonomy_path='python/async-programming' allowed_tools=['bash', 'write_file', 'read_file'] skill_style='comprehensive'"

============================================================
END FILE: data/mlflow/runs/330001648406427495/2a8000d86d6548a8b79496545e5df469/artifacts/skill_metadata.json
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2a8000d86d6548a8b79496545e5df469/artifacts/validation_report.json
============================================================

"passed=True status='warnings' score=0.82 errors=[] warnings=['The content plan required at least 5 \u274c/\u2705 contrast examples; only 2 were provided.', 'Pattern 6 (Throttling and Semaphores) from the content plan is missing in the core patterns section.'] checks_performed=['frontmatter_validation', 'metadata_consistency', 'section_presence', 'pattern_count_verification', 'syntax_check', 'link_validation'] checks=[ValidationCheckItem(id='check_frontmatter', check='Frontmatter validity', passed=True, message='Frontmatter is present and correctly formatted.', severity='info', required=True), ValidationCheckItem(id='check_metadata', check='Metadata consistency', passed=True, message='Name and description in content match skill_metadata.', severity='info', required=True), ValidationCheckItem(id='check_plan_alignment', check='Content plan adherence', passed=False, message='Missing Pattern 6 (Throttling and Semaphores) and failed to meet the count of 5 contrast (\u274c/\u2705) examples.', severity='warning', required=True), ValidationCheckItem(id='check_syntax', check='Modern Python syntax', passed=True, message='Correctly uses Python 3.11+ asyncio.TaskGroup and asyncio.timeout.', severity='info', required=True), ValidationCheckItem(id='check_links', check='Progressive disclosure links', passed=True, message='Internal relative links are present and follow the specified structure.', severity='info', required=True)] feedback='The skill is technically sound and uses modern Python syntax. However, it falls short of the specific content plan requirements regarding the number of contrast examples and the inclusion of the Throttling/Semaphore pattern.'"

============================================================
END FILE: data/mlflow/runs/330001648406427495/2a8000d86d6548a8b79496545e5df469/artifacts/validation_report.json
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2a8000d86d6548a8b79496545e5df469/meta.yaml
============================================================

artifact_uri: /Volumes/Samsung-SSD-T7/Workspaces/Github/qredence/agent-framework/v0.5/_WORLD/skills-fleet/mlruns/330001648406427495/2a8000d86d6548a8b79496545e5df469/artifacts
end_time: 1769544064950
entry_point_name: ''
experiment_id: '330001648406427495'
lifecycle_stage: active
run_id: 2a8000d86d6548a8b79496545e5df469
run_name: Create a skill for Python async programming best practices
source_name: ''
source_type: 4
source_version: ''
start_time: 1769543922909
status: 3
tags: []
user_id: zocho


============================================================
END FILE: data/mlflow/runs/330001648406427495/2a8000d86d6548a8b79496545e5df469/meta.yaml
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2b71e77f8d3542ab92395128d5d8d90b/meta.yaml
============================================================

artifact_uri: /Volumes/Samsung-SSD-T7/Workspaces/Github/qredence/agent-framework/v0.5/_WORLD/skills-fleet/mlruns/330001648406427495/2b71e77f8d3542ab92395128d5d8d90b/artifacts
end_time: 1769516140888
entry_point_name: ''
experiment_id: '330001648406427495'
lifecycle_stage: active
run_id: 2b71e77f8d3542ab92395128d5d8d90b
run_name: phase1_task_analysis
source_name: ''
source_type: 4
source_version: ''
start_time: 1769516115048
status: 3
tags: []
user_id: zocho


============================================================
END FILE: data/mlflow/runs/330001648406427495/2b71e77f8d3542ab92395128d5d8d90b/meta.yaml
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2c825fc5620542d9a680d343181c1237/artifacts/quality_assessment.json
============================================================

{
  "quality_score": 0.94,
  "strengths": [
    "Excellent \u274c/\u2705 contrast patterns that clearly distinguish 'Design Debt' from 'Systematic Design'.",
    "Clear and accurate architectural hierarchy for Design Tokens (Primitive, Semantic, Component).",
    "Strong core principle statement ('System over Software') that effectively sets the mental model for the skill.",
    "Comprehensive Accessibility section with specific, measurable requirements (WCAG 2.1 AA targets).",
    "Actionable validation section featuring both conceptual CLI commands and a manual audit checklist."
  ],
  "weaknesses": [
    "The governance section is slightly thin on how to manage conflicting requirements between different product squads in a federated model.",
    "Lacks mention of specific token transformation tools (e.g., Style Dictionary or Theo) which are standard for intermediate-level system implementation.",
    "The 'Real-World Impact' section provides metrics but lacks a specific narrative or case study context to ground the claims.",
    "Missing guidance on documentation standards for the components themselves (e.g., usage of Storybook or similar)."
  ],
  "recommendations": [
    "Add a section in Governance on 'The Contribution Workflow' to detail how a federated squad submits a component back to the core.",
    "Improve the Token Architecture section by mentioning transformation tools like Style Dictionary for exporting tokens to different platforms (iOS, Android, Web).",
    "Expand the Validation section to include specific automated accessibility testing tools like axe-core or lighthouse-ci.",
    "Add a note on 'Versioning Strategy' in section 4 explaining how to handle breaking changes in CSS/Sass vs. Token JSON files."
  ],
  "audience_alignment": 0.95,
  "rationale": "The skill content is exceptionally well-structured and highly prescriptive, perfectly aligning with the 'intermediate' target level. It provides a strong core principle and uses 'Iron Law' style language (e.g., 'MUST be tokenized', 'MUST comply') to establish clear standards. The inclusion of \u274c/\u2705 contrast tables is a major strength, as it provides concrete examples of what to avoid. The token hierarchy and accessibility sections are technically sound and offer immediate practical value for a team scaling their UI infrastructure. Minor improvements could be made by referencing industry-standard tools for token transformation and providing more detail on governance conflict resolution.",
  "deterministic_metrics": {
    "deterministic_score": 0.5968478260869563,
    "pattern_count": 12,
    "has_core_principle": false,
    "has_strong_guidance": true,
    "has_good_bad_contrast": true,
    "code_examples_count": 2,
    "deterministic_issues": [
      "Missing Overview section",
      "Missing Core Patterns section",
      "Missing key insights after patterns",
      "Missing core principle statement (add '**Core principle:**')"
    ],
    "deterministic_strengths": [
      "Has skill name",
      "Description follows 'Use when...' pattern",
      "Has When to Use section",
      "Has Quick Start section",
      "Includes real-world impact/benefits",
      "Has Quick Start section (v2 recommended)",
      "Excellent pattern coverage (12 patterns)",
      "Shows both anti-patterns (\u274c) and production patterns (\u2705)",
      "All code blocks have language specification",
      "Code examples are complete (no placeholders)",
      "Code examples are substantial",
      "Has code examples (2 blocks)",
      "Has strong imperative guidance (Iron Law style)",
      "Has Good/Bad contrast examples",
      "High-quality description with specific triggers"
    ]
  },
  "calibrated_score": 0.5968478260869563
}

============================================================
END FILE: data/mlflow/runs/330001648406427495/2c825fc5620542d9a680d343181c1237/artifacts/quality_assessment.json
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2c825fc5620542d9a680d343181c1237/artifacts/skill_content.md
============================================================

---
name: design-system-guidelines
description: Use when product teams face UI/UX inconsistencies, high design debt, or fragmented development workflows. This skill provides the framework for establishing design tokens, component standards, and accessibility rules to ensure a unified user experience across platforms.
---

# Design System Guidelines

A design system is the single source of truth that bridges the gap between design and engineering. It is not merely a component library; it is a collection of reusable functional elements governed by clear standards that can be assembled to build any number of applications.

## Core Principle
**System over Software:** Prioritize the relationship between elements and their underlying logic over individual visual mocks. Every design decision MUST be tokenized, semantic, and accessible by default.

## When to Use This Skill

### Use When:
- Launching a multi-platform product (Web, iOS, Android) requiring visual parity.
- Consolidating legacy applications with fragmented UI/UX patterns.
- Scaling a design team where manual handoffs are causing bottlenecks.
- Implementing a "Dark Mode" or multi-brand strategy (theming).
- Remediating accessibility issues (WCAG compliance) across a large codebase.

### Do Not Use When:
- Building a one-off marketing landing page with no long-term maintenance.
- Creating low-fidelity wireframes for early-stage discovery.
- Managing print media or physical branding assets.

## Quick Start: The Token Hierarchy

Before creating components, you must establish the **Token Architecture**. Tokens are the DNA of the system.

1.  **Primitive (Global) Tokens**: Raw values (e.g., `blue-500: #007BFF`). NEVER use these in components.
2.  **Semantic (Alias) Tokens**: Map primitives to intent (e.g., `action-primary-default: $blue-500`). ALWAYS use these for component logic.
3.  **Component Tokens**: Map semantic tokens to specific elements (e.g., `button-bg-color: $action-primary-default`). Use for high-specificity overrides.

```json
// Example: Semantic Token Mapping
{
  "color": {
    "background": {
      "surface": "{color.primitive.white}",
      "neutral-subtle": "{color.primitive.gray-100}"
    },
    "text": {
      "primary": "{color.primitive.gray-900}",
      "inverse": "{color.primitive.white}"
    }
  }
}
```

---

## 1. Atomic Design Methodology

All UI elements MUST be organized according to the Atomic Design hierarchy to ensure strict inheritance and modularity.

### The Hierarchy
- **Atoms**: Foundations like color, type, icons, and buttons.
- **Molecules**: Groups of atoms working together (e.g., a Search bar: Input + Button).
- **Organisms**: Complex UI sections (e.g., a Header: Logo + Nav + Search).
- **Templates**: Layout-level structures defining content placement.
- **Pages**: Specific instances of templates with real content.

### Design Debt vs. Systematic Design
| Feature | ❌ Design Debt (Hardcoded) | ✅ Systematic Design (Atomic) |
| :--- | :--- | :--- |
| **Color** | Hex codes used directly in CSS/Figma. | Semantic tokens (e.g., `border-error`). |
| **Spacing** | Random pixel values (7px, 11px). | 4px or 8px base grid increments. |
| **Buttons** | Multiple button styles across pages. | One Button atom with defined variants. |

---

## 2. Core Component Standards

Components MUST be designed as **State Machines**. A component is only complete when all interactive states are defined.

### Essential Component States
1.  **Idle**: The default appearance.
2.  **Hover**: Visual feedback for pointer interaction.
3.  **Active/Pressed**: Confirmation of intent.
4.  **Focus**: MUST be highly visible for keyboard navigation (Standard: 2px ring).
5.  **Disabled**: Indicates non-interactivity (Contrast must still be legible).
6.  **Loading**: Skeleton states or spinners to manage perceived latency.

### Composition Patterns
❌ **Pattern: Over-Customization**
Creating a new "SpecialButton" because the primary button needs a different icon size.
✅ **Pattern: Sub-Components**
Using "Slots" or "Child components" to allow flexible content within a standardized container.

---

## 3. Accessibility Framework (WCAG 2.1+)

Accessibility is a requirement, not a feature. Systems MUST comply with WCAG 2.1 AA standards at a minimum.

### Mandatory Rules
- **Color Contrast**: Text-to-background ratio MUST be at least 4.5:1 (AA) for normal text and 3:1 for large text.
- **Touch Targets**: All interactive elements MUST have a minimum hit area of 44x44px.
- **Semantic HTML**: Use proper tags (`<button>`, `<nav>`) rather than `<div>` with click handlers.
- **Focus Management**: Focus order MUST follow the visual flow (Top-to-Bottom, Left-to-Right).

### Visual Accessibility Patterns
| Context | ❌ Common Mistake | ✅ Accessible Pattern |
| :--- | :--- | :--- |
| **Error States** | Using only red color to signal error. | Using an Error Icon + Red Color + Text label. |
| **Input Fields** | Placeholder text as the only label. | Persistent labels above/beside the input. |
| **Navigation** | Icons without text or ARIA labels. | Icon + Text or `aria-label` attribute. |

---

## 4. Governance and Versioning

A design system is a product, not a project. It requires a contribution model to stay relevant.

### The Federated Model
Instead of a single "Design System Team" making all decisions, use a **Federated Model** where representatives from different product squads contribute back to the core.

### Managing Change
- **Patch**: Visual tweaks (e.g., adjusting a border radius).
- **Minor**: New components or properties (Backward compatible).
- **Major**: Breaking changes (e.g., changing token names or removing components).

---

## Real-World Impact

Implementing these guidelines results in measurable outcomes:
1.  **Developer Velocity**: Reductions in UI coding time by 30-50% through component reuse.
2.  **Brand Consistency**: 100% parity across web and mobile platforms.
3.  **Design Debt**: Significant reduction in "one-off" components and CSS overrides.
4.  **Accessibility**: Baseline compliance across all products without manual per-page audits.

---

## Validation

Verify the health of the system using these commands and checks:

### Token Validation (Conceptual)
```bash
# Example: Using a CLI tool to check for hardcoded colors in the codebase
npx design-system-validator --check-hardcoded-colors ./src

# Example: Validating Token JSON against the System Schema
validate-tokens --schema ./system-schema.json --input ./tokens.json
```

### Manual System Audit
- [ ] **Contrast Check**: Run all semantic color pairs through a contrast checker.
- [ ] **Keyboard Nav**: Tab through every "Organism" to ensure focus doesn't get lost.
- [ ] **Theming**: Toggle "Dark Mode" and ensure no primitive colors remain visible.
- [ ] **Inventory**: Count "one-off" components. If > 5%, the system is failing to meet user needs.

============================================================
END FILE: data/mlflow/runs/330001648406427495/2c825fc5620542d9a680d343181c1237/artifacts/skill_content.md
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2c825fc5620542d9a680d343181c1237/artifacts/skill_metadata.json
============================================================

"skill_id='design/design-system-guidelines' name='design-system-guidelines' description='Use when product teams face UI/UX inconsistencies, high design debt, or fragmented development workflows. This skill provides the framework for establishing design tokens, component standards, and accessibility rules to ensure a unified user experience across platforms.' version='1.0.0' type='specialization' weight='medium' load_priority='task_specific' dependencies=[] capabilities=['define-design-tokens', 'audit-ui-consistency', 'apply-atomic-design', 'enforce-accessibility-standards'] category='design' keywords=['design system', 'style guide', 'component library', 'tokenization', 'WCAG', 'atomic design'] scope='Covers design tokens (color, spacing, type), atomic design hierarchy, core component states, and accessibility standards. Excludes platform-specific implementation code (React/Vue), marketing/print design, and software-specific tutorials.' see_also=['_core/communication', '_core/reasoning'] tags=['design-systems', 'ui-ux', 'design-tokens', 'atomic-design', 'accessibility', 'design-ops'] taxonomy_path='' allowed_tools=['read_file', 'write_file', 'list_dir'] skill_style='comprehensive'"

============================================================
END FILE: data/mlflow/runs/330001648406427495/2c825fc5620542d9a680d343181c1237/artifacts/skill_metadata.json
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2c825fc5620542d9a680d343181c1237/artifacts/validation_report.json
============================================================

"passed=True status='passed' score=0.88 errors=[] warnings=['Missing specific token naming tables/examples for Spacing and Typography.'] checks_performed=['spec_frontmatter', 'spec_naming', 'meta_consistency', 'plan_alignment', 'pattern_count', 'acc_standards'] checks=[ValidationCheckItem(id='spec_frontmatter', check='Spec Compliance (Frontmatter)', passed=True, message='Frontmatter is correctly formatted with name and description.', severity='info', required=True), ValidationCheckItem(id='spec_naming', check='Naming Convention', passed=True, message=\"Skill name 'design-system-guidelines' uses correct kebab-case.\", severity='info', required=True), ValidationCheckItem(id='meta_consistency', check='Metadata Consistency', passed=True, message='Skill metadata matches content frontmatter exactly.', severity='info', required=True), ValidationCheckItem(id='plan_alignment', check='Content Plan Alignment', passed=False, message='Most sections present, but missing specific examples for Spacing and Type scales as requested in the plan.', severity='warning', required=True), ValidationCheckItem(id='pattern_count', check='Pattern Contrast Count', passed=True, message='Found 7 pattern contrasts (Requirement: 5+).', severity='info', required=True), ValidationCheckItem(id='acc_standards', check='Accessibility Standards', passed=True, message='Comprehensive accessibility section included with WCAG 2.1 mapping.', severity='info', required=True)] feedback='The skill is high quality and follows the structured guidelines well. However, it fails to include the specific spacing and typography token examples/tables explicitly requested in the Phase 1 content plan and success criteria.'"

============================================================
END FILE: data/mlflow/runs/330001648406427495/2c825fc5620542d9a680d343181c1237/artifacts/validation_report.json
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2c825fc5620542d9a680d343181c1237/meta.yaml
============================================================

artifact_uri: /Volumes/Samsung-SSD-T7/Workspaces/Github/qredence/agent-framework/v0.5/_WORLD/skills-fleet/mlruns/330001648406427495/2c825fc5620542d9a680d343181c1237/artifacts
end_time: 1769536451101
entry_point_name: ''
experiment_id: '330001648406427495'
lifecycle_stage: active
run_id: 2c825fc5620542d9a680d343181c1237
run_name: I want a design system guideline skill
source_name: ''
source_type: 4
source_version: ''
start_time: 1769536320204
status: 3
tags: []
user_id: zocho


============================================================
END FILE: data/mlflow/runs/330001648406427495/2c825fc5620542d9a680d343181c1237/meta.yaml
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2ce21ced296d42e1b4971a7877672d26/meta.yaml
============================================================

artifact_uri: /Volumes/Samsung-SSD-T7/Workspaces/Github/qredence/agent-framework/v0.5/_WORLD/skills-fleet/mlruns/330001648406427495/2ce21ced296d42e1b4971a7877672d26/artifacts
end_time: 1769513910382
entry_point_name: ''
experiment_id: '330001648406427495'
lifecycle_stage: active
run_id: 2ce21ced296d42e1b4971a7877672d26
run_name: phase3_quality_assurance
source_name: ''
source_type: 4
source_version: ''
start_time: 1769513910367
status: 3
tags: []
user_id: zocho


============================================================
END FILE: data/mlflow/runs/330001648406427495/2ce21ced296d42e1b4971a7877672d26/meta.yaml
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2ceebdf6bee642719e67216c91e25638/meta.yaml
============================================================

artifact_uri: /Volumes/Samsung-SSD-T7/Workspaces/Github/qredence/agent-framework/v0.5/_WORLD/skills-fleet/mlruns/330001648406427495/2ceebdf6bee642719e67216c91e25638/artifacts
end_time: 1769513450596
entry_point_name: ''
experiment_id: '330001648406427495'
lifecycle_stage: active
run_id: 2ceebdf6bee642719e67216c91e25638
run_name: phase3_quality_assurance
source_name: ''
source_type: 4
source_version: ''
start_time: 1769513450581
status: 3
tags: []
user_id: zocho


============================================================
END FILE: data/mlflow/runs/330001648406427495/2ceebdf6bee642719e67216c91e25638/meta.yaml
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2cfaef2e3bdd4710931d878c38d091ae/meta.yaml
============================================================

artifact_uri: /Volumes/Samsung-SSD-T7/Workspaces/Github/qredence/agent-framework/v0.5/_WORLD/skills-fleet/mlruns/330001648406427495/2cfaef2e3bdd4710931d878c38d091ae/artifacts
end_time: 1769514220992
entry_point_name: ''
experiment_id: '330001648406427495'
lifecycle_stage: active
run_id: 2cfaef2e3bdd4710931d878c38d091ae
run_name: phase1_task_analysis
source_name: ''
source_type: 4
source_version: ''
start_time: 1769514220971
status: 3
tags: []
user_id: zocho


============================================================
END FILE: data/mlflow/runs/330001648406427495/2cfaef2e3bdd4710931d878c38d091ae/meta.yaml
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2ebd630de0414022a714c7d015ef856d/artifacts/quality_assessment.json
============================================================

{
  "quality_score": 0.95,
  "strengths": [
    "Includes modern Python 3.11+ Structured Concurrency patterns (TaskGroup), which is often omitted in older tutorials.",
    "The 'Iron Laws' section provides clear, non-negotiable rules that prevent common production failures.",
    "Addresses the subtle but critical issue of garbage collection for background tasks (create_task), a common pitfall in intermediate-level applications.",
    "Excellent use of \u274c/\u2705 patterns to demonstrate the performance impact of sequential awaits vs. concurrent execution.",
    "Provides actionable validation techniques, such as using environment variables (PYTHONASYNCIODEBUG) and external profiling tools."
  ],
  "weaknesses": [
    "While it mentions 'return_exceptions=True' in asyncio.gather, it doesn't provide code on how to actually filter or handle the resulting mix of exceptions and values.",
    "Lacks mention of 'asyncio.shield()', which is often necessary for intermediate developers to protect critical cleanup tasks from cancellation.",
    "Does not discuss the 'Graceful Shutdown' pattern, which is a major pain point when moving from scripts to long-running services."
  ],
  "recommendations": [
    "Add a code snippet to the 'Batch Execution' section showing how to iterate through results and check 'isinstance(res, Exception)' when using return_exceptions=True.",
    "Include a 'Graceful Shutdown' section demonstrating how to await 'asyncio.all_tasks()' and cancel them during a SIGTERM event.",
    "Add a recommendation to use 'uvloop' in the 'Real-World Impact' section for users targeting Linux environments for an extra performance boost.",
    "Briefly explain the 'async with' protocol for custom context managers, as intermediate users will likely need to implement their own async resources."
  ],
  "audience_alignment": 1.0,
  "rationale": "The content is exceptionally high quality and perfectly tailored for an intermediate audience. It moves beyond basic syntax to address real-world production concerns such as structured concurrency (TaskGroups), background task garbage collection, and bridging synchronous code. The use of \"Iron Laws\" provides the necessary authoritative guidance for this topic. It follows the required format with clear \u274c/\u2705 contrasts and includes modern Python 3.11+ features. The technical accuracy regarding the event loop and the distinction between concurrency and parallelism is precise.",
  "deterministic_metrics": {
    "deterministic_score": 0.6413043478260868,
    "pattern_count": 9,
    "has_core_principle": true,
    "has_strong_guidance": true,
    "has_good_bad_contrast": true,
    "code_examples_count": 10,
    "deterministic_issues": [
      "Missing Overview section",
      "Missing key insights after patterns"
    ],
    "deterministic_strengths": [
      "Has skill name",
      "Description follows 'Use when...' pattern",
      "Has When to Use section",
      "Has Core Patterns section",
      "Has Quick Start section",
      "Includes real-world impact/benefits",
      "Has Quick Start section (v2 recommended)",
      "Excellent pattern coverage (9 patterns)",
      "Shows both anti-patterns (\u274c) and production patterns (\u2705)",
      "All code blocks have language specification",
      "Code examples are complete (no placeholders)",
      "Code examples are substantial",
      "Rich code examples (10 blocks)",
      "Has clear core principle statement",
      "Has strong imperative guidance (Iron Law style)",
      "Has Good/Bad contrast examples",
      "Adequate description quality"
    ]
  },
  "calibrated_score": 0.6413043478260868
}

============================================================
END FILE: data/mlflow/runs/330001648406427495/2ebd630de0414022a714c7d015ef856d/artifacts/quality_assessment.json
============================================================

============================================================
FILE: data/mlflow/runs/330001648406427495/2ebd630de0414022a714c7d015ef856d/artifacts/skill_content.md
============================================================

---
name: async-concurrency
description: Use when Python applications experience I/O-bound performance bottlenecks (network latency, DB calls) or require high-concurrency (thousands of connections). Apply to prevent UI freezing and maximize throughput without the overhead of threads.
---

# Asynchronous Concurrency in Python

Mastering `asyncio` is essential for building high-performance Python services. Unlike threading, which relies on the OS to switch contexts, `asyncio` uses **cooperative multitasking** where the application explicitly yields control back to a single-threaded event loop during I/O wait times.

## Core Principle: The Single-Threaded Loop
The Python Event Loop runs on a **single thread**. If any function "blocks" (executes a long-running CPU task or a synchronous I/O call), the entire application freezes. **Async is not about doing two things at the same moment (Parallelism); it is about managing multiple tasks while waiting for I/O (Concurrency).**

---

## When to Use
- **High-volume I/O:** Web scrapers, API gateways, or microservices handling hundreds of concurrent requests.
- **Latency Hiding:** Executing multiple database queries or API calls simultaneously rather than sequentially.
- **Streaming Data:** Handling WebSockets or long-lived TCP connections.
- **Responsive UIs:** Keeping a command-line interface or GUI responsive while background tasks run.

---

## Quick Start: The Modern Async Entry Point

Python 3.7+ simplified the entry point. ALWAYS use `asyncio.run()` for the top-level entry point.

```python
import asyncio
import httpx

async def fetch_status(url: str):
    async with httpx.AsyncClient() as client:
        response = await client.get(url)
        return response.status_code

async def main():
    # Calling the coroutine returns a coroutine object; it does NOT execute yet
    status = await fetch_status("https://example.com")
    print(f"Status: {status}")

if __name__ == "__main__":
    asyncio.run(main())
```

---

## Core Patterns

### 1. Batch Execution with `asyncio.gather`
Use when you have a fixed set of independent tasks and need all their results returned as a list.

❌ **Anti-Pattern: Sequential Await**
```python
# Total time = sum of all requests (Slow)
results = []
for url in urls:
    results.append(await fetch(url)) 
```

✅ **Production Pattern: Concurrent Gather**
```python
# Total time = time of the slowest request (Fast)
tasks = [fetch(url) for url in urls]
results = await asyncio.gather(*tasks, return_exceptions=True)
# return_exceptions=True prevents one failure from crashing the whole batch
```

### 2. Structured Concurrency with `TaskGroup` (Python 3.11+)
The modern standard for managing groups of tasks. If one task fails, all others are cancelled, preventing "zombie" tasks.

✅ **Production Pattern: TaskGroups**
```python
async def main():
    async with asyncio.TaskGroup() as tg:
        task1 = tg.create_task(job_one())
        task2 = tg.create_task(job_two())
    
    # Both tasks are guaranteed finished here
    print(task1.result(), task2.result())
```

### 3. Non-Blocking Background Tasks
Use `asyncio.create_task()` to start a process in the background and continue execution immediately.

✅ **Production Pattern: Fire and Forget (with reference)**
```python
background_tasks = set() # MUST keep a reference to prevent garbage collection

