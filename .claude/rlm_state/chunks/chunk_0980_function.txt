<!-- Chunk 980: bytes 3431000-3432703, type=function -->
def main_callback(
    ctx: typer.Context,
    api_url: str = typer.Option(
        DEFAULT_API_URL,
        "--api-url", "-a",
        help="API server URL (must use https:// in production)",
        envvar="SKILL_FLEET_API_URL"
    ),
    user_id: str = typer.Option(
        "default",
        "--user", "-u",
        help="User ID for context (alphanumeric, -, ., @, _ only)",
        envvar="SKILL_FLEET_USER_ID"
    ),
    timeout: float = typer.Option(
        30.0,
        "--timeout",
        help="API timeout in seconds (max: 300)",
        envvar="SKILL_FLEET_API_TIMEOUT"
    ),
):
    """Global configuration for Skill Fleet CLI.

    This callback runs before all commands and sets up the shared
    configuration object via ctx.obj.
    """
    # Store config object in Click context
    ctx.obj = CLIConfig(api_url=api_url, user_id=user_id, timeout=timeout)


# Register commands from separate files
app.command(name="create")(create_command)
app.command(name="list")(list_command)
app.command(name="serve")(serve_command)
app.command(name="chat")(chat_command)
app.command(name="validate")(validate_command)
app.command(name="onboard")(onboard_command)
app.command(name="analytics")(analytics_command)
app.command(name="migrate")(migrate_command)
app.command(name="generate-xml")(generate_xml_command)
app.command(name="optimize")(optimize_command)


if __name__ == "__main__":
    app()
```

**Step 4: Update client.py to support timeout**

Modify `src/skill_fleet/cli/client.py`:

```python
"""HTTP client for communicating with the Skill Fleet API."""

from __future__ import annotations

import logging
from typing import Any

import httpx

logger = logging.getLogger(__name__)


