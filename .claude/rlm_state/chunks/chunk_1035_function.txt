<!-- Chunk 1035: bytes 3723024-3725403, type=function -->
def safe_float(value: Any, default: float = 0.0) -> float:
    """Safely convert value to float.

    Args:
        value: Value to convert
        default: Default if conversion fails

    Returns:
        Float value
    """
    if isinstance(value, (int, float)):
        return float(value)
    if isinstance(value, str):
        try:
            return float(value)
        except ValueError:
            return default
    return default
```

**Migration Steps**:
1. Create `src/skill_fleet/common/__init__.py`
2. Create `src/skill_fleet/common/utils.py` with above content
3. Update imports in affected files:
   - `from ..common.utils import safe_json_loads, safe_float` (in workflow/modules.py)
   - `from ...common.utils import safe_json_loads, safe_float` (in agent/modules.py)
4. Remove duplicate implementations
5. Run tests to verify: `uv run pytest`

**Estimated Impact**: ~70 lines of code removed, improved maintainability

---

## Phase 2: Legacy Code Removal (Medium Priority)

### 2.1 Remove Legacy DSPy Signatures

**Problem**: `workflow/signatures.py` contains legacy string-based signatures marked for removal.

**Files Affected**:
- `src/skill_fleet/workflow/signatures.py` (lines 325-383)

**Solution**: Remove the following:
1. `UnderstandTaskForSkillLegacy` class
2. `PlanSkillStructureLegacy` class
3. Associated comment on line 327

**Verification**:
- Search codebase for references to these classes (should be none)
- Run `uv run pytest` to ensure no breaking changes

### 2.2 Clean Up Deprecated CLI Files

**Problem**: Git status shows deleted CLI files that may need formal removal from git history.

**Files Affected** (already deleted):
- `src/skill_fleet/cli_submodules/__init__.py`
- `src/skill_fleet/cli_submodules/main.py`
- `src/skill_fleet/cli_submodules/onboarding_cli.py`

**Solution**: These are already deleted. Ensure no imports reference these paths.

---

## Phase 3: Complete Incomplete Features (Medium Priority)

### 3.1 Incorporate Revision Feedback

**Problem**: TODO comments indicate `revision_feedback` parameter not used.

**Files Affected**:
- `src/skill_fleet/workflow/modules.py` (lines 524, 959)
- `src/skill_fleet/agent/agent.py` (line 1130)

**Solution**: Update `EditSkillContent` signature and `EditModule` to properly incorporate feedback:

**In `workflow/signatures.py`, update `EditSkillContent`:**

```python
