<!-- Chunk 2108: bytes 8037826-8039907, type=function -->
def test_bundled_resources_registration(temp_taxonomy: Path) -> None:
    """Verify that bundled resources (scripts, assets, resources) are saved correctly.

    Note: v2 standard maps legacy `resources/` payloads to `guides/`.
    """
    manager = TaxonomyManager(temp_taxonomy)

    skill_path = "test/bundled_resource_skill"
    metadata = {
        "version": "1.0.0",
        "type": "technical",
        "description": "A test skill with bundled resources.",
    }
    content = "# Test Skill\n\nThis is a test."
    evolution = {"history": []}

    extra_files = {
        "scripts": {
            "setup.py": "print('setup')",
            "utils/helper.py": "def help(): pass",
        },
        "assets": {
            "logo.png": "fake_png_content",  # Text content simulating binary/text asset
            "data/config.json": '{"key": "value"}',
        },
        "resources": {
            "dataset.csv": "col1,col2\n1,2",
        },
    }

    success = manager.register_skill(
        path=skill_path,
        metadata=metadata,
        content=content,
        evolution=evolution,
        extra_files=extra_files,
    )

    assert success is True

    # Verify directory structure and content
    skill_dir = temp_taxonomy / skill_path

    # Check scripts
    assert (skill_dir / "scripts" / "setup.py").exists()
    assert (skill_dir / "scripts" / "setup.py").read_text() == "print('setup')"

    assert (skill_dir / "scripts" / "utils" / "helper.py").exists()
    assert (skill_dir / "scripts" / "utils" / "helper.py").read_text() == "def help(): pass"

    # Check assets
    assert (skill_dir / "assets" / "logo.png").exists()
    assert (skill_dir / "assets" / "logo.png").read_text() == "fake_png_content"

    assert (skill_dir / "assets" / "data" / "config.json").exists()
    assert (skill_dir / "assets" / "data" / "config.json").read_text() == '{"key": "value"}'

    # Check resources (mapped to guides/)
    assert (skill_dir / "guides" / "dataset.csv").exists()
    assert (skill_dir / "guides" / "dataset.csv").read_text() == "col1,col2\n1,2"


