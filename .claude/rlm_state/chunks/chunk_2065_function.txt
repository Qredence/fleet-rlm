<!-- Chunk 2065: bytes 7972357-7972981, type=function -->
def test_cors_default_production_insecure_fails():
    """Test that the app fails to start in production if CORS is not configured."""
    with patch(
        "skill_fleet.api.factory.settings",
        MagicMock(
            is_development=False,
            cors_origins_list=[],
        ),
    ):
        # SKILL_FLEET_CORS_ORIGINS is not set, and SKILL_FLEET_ENV is production.
        # It should raise a ValueError.
        with pytest.raises(ValueError) as excinfo:
            create_app()
        assert "SKILL_FLEET_CORS_ORIGINS must be set in production environment" in str(
            excinfo.value
        )


