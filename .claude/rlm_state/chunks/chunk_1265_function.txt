<!-- Chunk 1265: bytes 4701027-4702051, type=function -->
def cmd_list_programs(args: argparse.Namespace) -> int:
    """List saved optimized programs."""
    try:
        optimizer = SkillOptimizer(configure_lm=False)
        programs = optimizer.list_optimized_programs()

        if not programs:
            print("No optimized programs found.")
            return 0

        print(f"\n{'=' * 60}")
        print("SAVED OPTIMIZED PROGRAMS")
        print(f"{'=' * 60}")

        for prog in programs:
            print(f"\nName: {prog.get('name', 'unknown')}")
            print(f"  Path: {prog.get('path', 'unknown')}")
            if prog.get("saved_at"):
                print(f"  Saved: {prog['saved_at']}")
            if prog.get("dspy_version"):
                print(f"  DSPy Version: {prog['dspy_version']}")

        print(f"\n{'=' * 60}")

        if args.json:
            print("\nJSON Output:")
            print(json.dumps(programs, indent=2))

        return 0

    except Exception as e:
        logger.error(f"Failed to list programs: {e}")
        return 1


