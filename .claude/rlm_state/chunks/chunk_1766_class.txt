<!-- Chunk 1766: bytes 7401248-7403424, type=class -->
class ValidateComplianceModule(BaseModule):
    """
    Validate agentskills.io compliance.

    Checks YAML frontmatter, structure, and naming conventions.
    """

    def __init__(self):
        super().__init__()
        self.validate = dspy.ChainOfThought(ValidateCompliance)

    async def aforward(self, **kwargs: Any) -> dict[str, Any]:
        """
        Validate skill compliance.

        Args:
            skill_content: SKILL.md content
            taxonomy_path: Expected taxonomy path

        Returns:
            Validation results with score and issues

        """
        skill_content: str = kwargs["skill_content"]
        taxonomy_path: str = kwargs["taxonomy_path"]

        start_time = time.time()

        result = await self.validate.acall(skill_content=skill_content, taxonomy_path=taxonomy_path)

        output = {
            "passed": bool(result.passed) if hasattr(result, "passed") else False,
            "compliance_score": float(result.compliance_score)
            if hasattr(result, "compliance_score")
            else 0.0,
            "issues": result.issues if isinstance(result.issues, list) else [],
            "critical_issues": result.critical_issues
            if isinstance(result.critical_issues, list)
            else [],
            "warnings": result.warnings if isinstance(result.warnings, list) else [],
            "auto_fixable": result.auto_fixable if isinstance(result.auto_fixable, list) else [],
        }

        # Validate
        if not self._validate_result(output, ["passed", "compliance_score"]):
            output["passed"] = False
            output["compliance_score"] = 0.0

        # Log
        duration_ms = (time.time() - start_time) * 1000
        self._log_execution(
            inputs={"content_length": len(skill_content), "path": taxonomy_path},
            outputs={"passed": output["passed"], "score": output["compliance_score"]},
            duration_ms=duration_ms,
        )

        return output

    def forward(self, **kwargs) -> dict[str, Any]:
        """Synchronous forward - delegates to async."""
        import asyncio

        return asyncio.run(self.aforward(**kwargs))


