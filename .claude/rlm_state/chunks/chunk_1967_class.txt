<!-- Chunk 1967: bytes 7876823-7878432, type=class -->
class TestValidateSkill:
    """Tests for POST /api/v1/skills/{skill_id}/validate endpoint."""

    def test_validate_skill_success(self, client, sample_skill, mock_skill_service):
        """Test successful skill validation."""
        mock_skill_service.validate_skill.return_value = {
            "valid": True,
            "score": 0.95,
            "issues": [],
        }

        response = client.post(f"/api/v1/skills/{sample_skill['skill_id']}/validate")

        assert response.status_code == 200
        data = response.json()
        assert data["valid"] is True
        assert data["score"] == 0.95

    def test_validate_skill_with_issues(self, client, sample_skill, mock_skill_service):
        """Test validation with issues found."""
        mock_skill_service.validate_skill.return_value = {
            "valid": False,
            "score": 0.65,
            "issues": ["Missing examples", "Description too short"],
        }

        response = client.post(f"/api/v1/skills/{sample_skill['skill_id']}/validate")

        assert response.status_code == 200
        data = response.json()
        assert data["valid"] is False
        assert len(data["issues"]) > 0

    def test_validate_skill_not_found(self, client):
        """Test 404 when validating non-existent skill."""
        response = client.post("/api/v1/skills/non-existent-id/validate")

        assert response.status_code == 404


# =============================================================================
# Test Refine Skill Endpoint
# =============================================================================


