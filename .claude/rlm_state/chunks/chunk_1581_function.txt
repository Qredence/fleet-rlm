<!-- Chunk 1581: bytes 6539116-6540684, type=function -->
def init(
    force: bool = typer.Option(
        False,
        "--force",
        help="Force re-creation of all tables (WARNING: will delete data)",
    ),
) -> None:
    """
    Initialize database schema.

    Creates all necessary tables for skills-fleet persistence.
    Idempotent - safe to run multiple times.
    """
    from skill_fleet.infrastructure.db.database import SessionLocal, drop_db, init_db
    from skill_fleet.infrastructure.db.models import HITLInteraction, Job, Skill

    try:
        if force:
            typer.confirm(
                "⚠️  This will DELETE all data. Are you sure?",
                abort=True,
            )
            logger.info("Dropping all tables...")
            drop_db()
            logger.info("✅ Tables dropped")

        logger.info("Initializing database schema...")
        init_db()
        logger.info("✅ Database schema initialized")

        # Verify tables exist
        session = SessionLocal()
        try:
            # Try a simple query to each main table
            session.query(Skill).first()
            session.query(Job).first()
            session.query(HITLInteraction).first()
            logger.info("✅ All tables verified")
        finally:
            session.close()

        typer.echo("\n✅ Database initialized successfully!\n")

    except Exception as e:
        logger.error(f"Failed to initialize database: {e}", exc_info=True)
        typer.echo(f"\n❌ Error: {e}\n", err=True)
        raise typer.Exit(1) from e


from sqlalchemy import text  # noqa: E402


@db_app.command()
