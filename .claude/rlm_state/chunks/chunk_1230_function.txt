<!-- Chunk 1230: bytes 4621883-4623330, type=function -->
def build_taxonomy_tree(skills_data):
    """Build the logical tree from canonical paths."""
    tree = {}

    for item in skills_data:
        path_parts = item["canonical_path"].split("/")
        # We assume the canonical path implies the taxonomy structure
        # e.g., "python/async" -> python -> async

        current_level = tree
        for _, part in enumerate(path_parts[:-1]):  # Last part is the skill itself, usually?
            # Actually, the canonical path IS the skill location.
            # So if canonical is "python/async", does "async" become a leaf category
            # containing the skill, or is "async" the skill ID?

            # In the new model:
            # skills = flat list.
            # taxonomy_tree = logical hierarchy of CATEGORIES.

            # If canonical path is "python/async", is "python" the category?
            # Yes.

            if part not in current_level:
                current_level[part] = {"description": f"{part.title()} Category", "children": {}}

            # Move down
            current_level = current_level[part]["children"]

    # Function to recursively convert dicts to CategoryNode models
    def convert_to_nodes(d):
        nodes = {}
        for k, v in d.items():
            nodes[k] = CategoryNode(
                description=v["description"], children=convert_to_nodes(v["children"])
            )
        return nodes

    return convert_to_nodes(tree)


